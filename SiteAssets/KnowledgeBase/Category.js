var a0_0x2cc709=a0_0x3f8c;(function(_0x48a7b2,_0x21e613){var _0x5ce87c=a0_0x3f8c,_0x744788=_0x48a7b2();while(!![]){try{var _0x5f4412=-parseInt(_0x5ce87c(0xdf))/0x1+parseInt(_0x5ce87c(0x123))/0x2*(-parseInt(_0x5ce87c(0x135))/0x3)+-parseInt(_0x5ce87c(0x13f))/0x4*(-parseInt(_0x5ce87c(0x13c))/0x5)+-parseInt(_0x5ce87c(0x137))/0x6*(-parseInt(_0x5ce87c(0x118))/0x7)+parseInt(_0x5ce87c(0xf6))/0x8+-parseInt(_0x5ce87c(0x145))/0x9*(parseInt(_0x5ce87c(0x129))/0xa)+parseInt(_0x5ce87c(0x114))/0xb;if(_0x5f4412===_0x21e613)break;else _0x744788['push'](_0x744788['shift']());}catch(_0x13ea28){_0x744788['push'](_0x744788['shift']());}}}(a0_0x5460,0x7933f));var currentDepartnemtUrls='',categoryId='',departmentID='',isCurrentUserAuthorizedtoKnowledgeAdmin=![];$(document)[a0_0x2cc709(0x11a)](function(){var _0x35c5b4=a0_0x2cc709;userActivityNotificationEntry(_spPageContextInfo['userId'],window[_0x35c5b4(0x138)]),$[_0x35c5b4(0x11f)]({'cache':![]}),departmentID=GetParameterValues(_0x35c5b4(0x13a));Logged_DepartmentId==departmentID?$(_0x35c5b4(0xf5))[_0x35c5b4(0x11d)]():$(_0x35c5b4(0xf5))[_0x35c5b4(0x143)]();var _0x125028=titanForWork[_0x35c5b4(0x11e)]('CompanyId'),_0x5603fd=new Array();_0x5603fd[_0x35c5b4(0x113)]('Knowledge');var _0xc9334e=UserExistInProcessApprover(_0x125028,departmentID,_0x5603fd);for(var _0x1a8844=0x0;_0x1a8844<_0xc9334e[_0x35c5b4(0x13e)];_0x1a8844++){_0xc9334e[_0x1a8844][_0x35c5b4(0x136)]=='Knowledge'&&(isCurrentUserAuthorizedtoKnowledgeAdmin=!![]);}InitializationComponents(),$(_0x35c5b4(0x117))['click'](function(){var _0x3c1e24=_0x35c5b4;$(_0x3c1e24(0x133))[_0x3c1e24(0x12f)](''),$(_0x3c1e24(0x126))[_0x3c1e24(0x12a)](_0x3c1e24(0x11d));}),$('#btnAddUpdateCategory')['click'](function(){var _0x1a7f3f=_0x35c5b4,_0x532863=$(_0x1a7f3f(0x133))[_0x1a7f3f(0x12f)]()[_0x1a7f3f(0x149)]();if(_0x532863!=''&&_0x532863!=null){var _0x1dd6b6=categoryId;CategoryNameValidation(_0x532863,_0x1dd6b6)==0x0?_0x1dd6b6==''||_0x1dd6b6==null?AddNewCategory():UpdateCategory(_0x1dd6b6):alert(_0x1a7f3f(0xea));}else alert('Please\x20enter\x20category.');}),$(_0x35c5b4(0xf5))[_0x35c5b4(0xe6)](function(){var _0x31af17=_0x35c5b4;departmentID>0x0&&(document[_0x31af17(0x138)][_0x31af17(0x120)]='../Pages/AddKnowledge.aspx?WebAppId=232&DepartmentId='+departmentID+'&undefined=undefined');}),isCurrentUserAuthorizedtoKnowledgeAdmin==![]&&$('#btnAddCateg')[_0x35c5b4(0x112)]();});function InitializationComponents(){var _0x2de56b=a0_0x2cc709;departmentID>0x0&&GetDepartmentUrl(_0x2de56b(0xe5),departmentID);}function BindStatusChangeEvent(){var _0x399ccc=a0_0x2cc709;$(_0x399ccc(0x122))[_0x399ccc(0x12e)]()[_0x399ccc(0x10a)](function(){var _0x1ef61b=_0x399ccc,_0xdf8733=$(this)[_0x1ef61b(0x12b)]('id'),_0x3f0f82=_0xdf8733['split']('_')[0x1];$(this)[_0x1ef61b(0x108)](_0x1ef61b(0xe0))?UpdateCategoryStatus(_0x3f0f82,!![]):UpdateCategoryStatus(_0x3f0f82,![]);});}function AddNewCategory(_0x412373){var _0x2c4147=a0_0x2cc709,_0x5c0830=_0x2c4147(0x10c),_0x30f832=GetItemTypeForListName(_0x5c0830),_0x1aaeab;_0x1aaeab={'__metadata':{'type':_0x30f832},'Status':!![],'Title':$(_0x2c4147(0x133))[_0x2c4147(0x12f)]()[_0x2c4147(0x149)](),'PublishedCounter':'0','PendingCounter':'0','DraftCounter':'0'},$[_0x2c4147(0x106)](AddItemToList(_0x5c0830,_0x1aaeab))[_0x2c4147(0x10d)](function(_0x527ea4){var _0x3cd6e9=_0x2c4147;$(_0x3cd6e9(0x126))['modal'](_0x3cd6e9(0x143)),$(_0x3cd6e9(0x133))[_0x3cd6e9(0x12f)](''),GetAllCategory(currentDepartnemtUrls),alert(_0x3cd6e9(0xf7));})[_0x2c4147(0x132)](function(){var _0x1da01b=_0x2c4147;console[_0x1da01b(0x115)](_0x1da01b(0x102));});;}function UpdateCategory(_0x42699e){var _0x44f815=a0_0x2cc709,_0x48c585=_0x44f815(0x10c),_0x4f3763=GetItemTypeForListName(_0x48c585),_0x43a2fc;_0x43a2fc={'__metadata':{'type':_0x4f3763},'Title':$(_0x44f815(0x133))[_0x44f815(0x12f)]()[_0x44f815(0x149)]()},$[_0x44f815(0x106)](updateItemWithID(_0x48c585,_0x43a2fc,_0x42699e))['done'](function(_0x2adfed){var _0x174796=_0x44f815;$(_0x174796(0x126))[_0x174796(0x12a)](_0x174796(0x143)),$(_0x174796(0x133))[_0x174796(0x12f)](''),GetAllCategory(currentDepartnemtUrls),alert('Category\x20has\x20been\x20updated\x20successfully.');})[_0x44f815(0x132)](function(){var _0x2b8641=_0x44f815;console['log'](_0x2b8641(0x102));});;}function UpdateCategoryStatus(_0x508a42,_0xc611e3){var _0xda43c0=a0_0x2cc709,_0x2774ac='KnowledgeBaseCategory',_0xd38152=GetItemTypeForListName(_0x2774ac),_0x3f75dd;_0x3f75dd={'__metadata':{'type':_0xd38152},'Status':_0xc611e3},$[_0xda43c0(0x106)](updateItemWithID(_0x2774ac,_0x3f75dd,_0x508a42))[_0xda43c0(0x10d)](function(_0x2acf65){})['fail'](function(){var _0x11b4ae=_0xda43c0;console[_0x11b4ae(0x115)]('Error\x20in\x20Category\x20Topic.');});;}function CategoryNameValidation(_0x17ba39,_0x163bd5){var _0x6d1238=a0_0x2cc709,_0x55f1da=0x0,_0xc9d38='';_0x163bd5==''||_0x163bd5==null?_0xc9d38=_0x6d1238(0xec)+_0x17ba39+'\x27':_0xc9d38=_0x6d1238(0xec)+_0x17ba39+'\x27\x20and\x20ID\x20ne\x20\x27'+_0x163bd5+'\x27';var _0x440f7d=currentDepartnemtUrls+_0x6d1238(0x11c)+_0xc9d38;return $[_0x6d1238(0xe8)]({'url':_0x440f7d,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x52c39d){var _0x2e7cf7=_0x6d1238,_0x3d3454=_0x52c39d['d'][_0x2e7cf7(0xdd)];_0x55f1da=_0x3d3454[_0x2e7cf7(0x13e)];},'eror':function(_0x2fdb44){console['log']('error');}}),_0x55f1da;}function GetAllCategory(_0x3bda5f){var _0x3ba675=a0_0x2cc709,_0x4cab5d=_0x3ba675(0xf0);isCurrentUserAuthorizedtoKnowledgeAdmin!=!![]&&(_0x4cab5d=_0x4cab5d+_0x3ba675(0x11b));var _0x250803=_0x3bda5f+_0x3ba675(0x11c)+_0x4cab5d;$[_0x3ba675(0xe8)]({'url':_0x250803,'headers':{'Accept':'application/json;odata=verbose'},'async':![],'success':function(_0x15e6fa){var _0x10358d=_0x3ba675,_0x30975e=_0x15e6fa['d'][_0x10358d(0xdd)],_0x26e008='';_0x26e008+=_0x10358d(0x10b),_0x26e008+='<thead>',_0x26e008+='<tr>',_0x26e008+=_0x10358d(0x134),_0x26e008+=_0x10358d(0xf4),_0x26e008+=_0x10358d(0xfc),_0x26e008+=_0x10358d(0x13d);isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0x26e008+='<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Status\x22>Status</th>',_0x26e008+=_0x10358d(0xe3));_0x26e008+='</tr>',_0x26e008+='</thead>',_0x26e008+=_0x10358d(0xe7);for(var _0x5e839e=0x0;_0x5e839e<_0x30975e[_0x10358d(0x13e)];_0x5e839e++){var _0x3922b8=_0x30975e[_0x5e839e][_0x10358d(0x109)],_0x28a09e=_0x30975e[_0x5e839e][_0x10358d(0x127)],_0x4a76a7='';_0x28a09e==!![]&&(_0x4a76a7=_0x10358d(0xe0));var _0x2f37ee=new Date(_0x30975e[_0x5e839e]['Modified']),_0x45be5e=_0x30975e[_0x5e839e][_0x10358d(0xf9)];_0x45be5e==null&&(_0x45be5e=0x0);var _0x44af23=_0x30975e[_0x5e839e][_0x10358d(0xdc)];_0x44af23==null&&(_0x44af23=0x0);var _0x4ec075=_0x30975e[_0x5e839e][_0x10358d(0x147)];_0x4ec075==null&&(_0x4ec075=0x0);var _0x31fcc0=_0x30975e[_0x5e839e][_0x10358d(0x146)];_0x26e008+=_0x10358d(0x128),_0x26e008+=_0x10358d(0xe4)+_0x30975e[_0x5e839e]['ID']+_0x10358d(0x119)+_0x3922b8+_0x10358d(0x14b),_0x26e008+=_0x10358d(0x121)+_0x45be5e+_0x10358d(0x148),_0x26e008+=_0x10358d(0x121)+_0x44af23+'</td>',_0x45be5e+_0x44af23+_0x4ec075==0x0?_0x26e008+='<td></td>':_0x26e008+=_0x10358d(0x121)+ShowCommonDateFormat(_0x2f37ee)+_0x10358d(0x148),isCurrentUserAuthorizedtoKnowledgeAdmin==!![]&&(_0x26e008+=_0x10358d(0x121),_0x26e008+=_0x10358d(0x111),_0x26e008+=_0x10358d(0x110)+_0x30975e[_0x5e839e]['ID']+_0x10358d(0xf3)+_0x4a76a7+'>',_0x26e008+=_0x10358d(0x103),_0x26e008+=_0x10358d(0x14a)+_0x30975e[_0x5e839e]['ID']+_0x10358d(0x105)+escape(_0x3922b8)+_0x10358d(0x141),_0x45be5e+_0x44af23+_0x4ec075==0x0&&(_0x26e008+=_0x10358d(0x144)+_0x30975e[_0x5e839e]['ID']+_0x10358d(0xfe)),_0x26e008+='</td>'),_0x26e008+=_0x10358d(0x131);}_0x26e008+='</tbody>',_0x26e008+=_0x10358d(0x104),$('#categoryListItems')[_0x10358d(0xe9)](''),$(_0x10358d(0xf2))['append'](_0x26e008),BindStatusChangeEvent();},'eror':function(_0x1c5b32){var _0x1222e3=_0x3ba675;console['log'](_0x1222e3(0x100));}});}function GetDepartmentUrl(_0x5a1d02,_0x3c235f){var _0x59342e=a0_0x2cc709,_0x5d514f=_spPageContextInfo['webAbsoluteUrl']+_0x59342e(0x13b)+_0x3c235f+'\x27';$['ajax']({'url':_0x5d514f,'headers':{'Accept':_0x59342e(0x140)},'async':!![],'success':function(_0x185fe5){var _0x2951b6=_0x59342e,_0x4ecd2e=_0x185fe5['d'][_0x2951b6(0xdd)];if(_0x4ecd2e['length']>0x0){currentDepartnemtUrls=_0x4ecd2e[0x0]['SiteURL'];var _0x26483d=_0x4ecd2e[0x0][_0x2951b6(0xe1)];$(_0x2951b6(0x101))[_0x2951b6(0xe9)](_0x26483d),GetAllCategory(currentDepartnemtUrls);}},'eror':function(_0x1a41d9){var _0x59c0cc=_0x59342e;console[_0x59c0cc(0x115)]($(_0x59c0cc(0x139))['val']());}});}function updateItemWithID(_0x1d85f4,_0x2b7629,_0x2f07bb){var _0x2266f4=a0_0x2cc709,_0x949fd3=$['Deferred']();return $['ajax']({'url':currentDepartnemtUrls+_0x2266f4(0x130)+_0x1d85f4+'\x27)/GetItemById(\x27'+_0x2f07bb+'\x27)','type':'POST','headers':{'accept':_0x2266f4(0x140),'X-RequestDigest':$(_0x2266f4(0xfb))[_0x2266f4(0x12f)](),'content-Type':_0x2266f4(0x140),'X-Http-Method':'PATCH','If-Match':'*'},'data':JSON[_0x2266f4(0xfd)](_0x2b7629),'async':![],'success':function(_0x32f7c6){var _0x2e5fee=_0x2266f4;_0x949fd3[_0x2e5fee(0xfa)](!![]);},'error':function(_0x56f9bf){var _0x54e1ed=_0x2266f4;alert(JSON[_0x54e1ed(0xfd)](_0x56f9bf)),_0x949fd3[_0x54e1ed(0x107)](_0x56f9bf);}}),_0x949fd3[_0x2266f4(0x10f)]();}function a0_0x5460(){var _0x4d3b01=['<a></td>','DraftCounter','results','Are\x20you\x20sure,You\x20want\x20to\x20delete\x20this\x20category\x20?','308131oKbeHH','checked','DepartmentName','ListItem','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Action\x22>Action</th>','<td><a\x20style=\x22cursor:pointer\x22\x20onclick=\x22RedirectOnCategoryTopics(','Departments','click','<tbody\x20id=\x22listCollection\x22>','ajax','html','Category\x20name\x20is\x20already\x20exist.','&undefined=undefined','ID,Modified,Status,Title&$filter=Title\x20eq\x20\x27','charAt','/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items(','split','ID,Modified,Status,Title,PublishedCounter,PendingCounter,DraftCounter&$top=5000&$orderby=Modified\x20desc','../Pages/Topics.aspx?WebAppId=232&DepartmentId=','#categoryListItems','\x22\x20type=\x22checkbox\x22\x20','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Published\x22>Published</th>','#btnAddNewTopic','1249504krArNZ','Category\x20has\x20been\x20added\x20successfully.','toUpperCase','PublishedCounter','resolve','#__REQUESTDIGEST','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Draft\x22>Draft</th>','stringify','\x22)><i\x20class=\x22fa\x20fa-trash\x22></i></a></span>','\x27)/items?$select=','error','#deptName','Error\x20in\x20Category\x20Topic.','<span\x20class=\x22slider\x20round\x22></span></label></td>','</table>','\x22,\x22','when','reject','prop','Title','change','<table\x20class=\x22table\x20table2\x22>','KnowledgeBaseCategory','done','Deferred','promise','<input\x20id=\x22chkItemStatus_','<label\x20class=\x22switch\x22>','remove','push','19961403rqnhPk','log','DELETE','#btnAddCateg','84azeUus',')\x22>','ready','&$filter=Status\x20eq\x20\x271\x27','/_api/web/lists/getbytitle(\x27KnowledgeBaseCategory\x27)/items?$select=','show','getQueryStringParameter','ajaxSetup','href','<td>','input[id^=\x27chkItemStatus_\x27]','1815164lRoMdc','indexOf','slice','#myModal','Status','<tr>','10RlwbJY','modal','attr','POST','SP.Data.','unbind','val','/_api/web/lists/getbytitle(\x27','</tr>','fail','#txtCategory','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22Category\x22>Category</th>','3pscVvI','webPartName','224928KQSNaJ','location','#txtSomethingWentWrong','DepartmentId','/_api/web/lists/getbytitle(\x27Departments\x27)/items?$select=ID,SiteURL,DepartmentName&$filter=ID\x20eq\x20\x27','862685VtNmlq','<th\x20bgcolor=\x22efefef\x22\x20data-localize=\x22LastUpdated\x22>Last\x20Updated</th>','length','4EnffYh','application/json;odata=verbose','\x22)><i\x20class=\x22fa\x20fa-edit\x22></i></a></span>','&topiccategoryid=','hide','<span\x20class=\x22action-delete-button\x22><a\x20onclick=DeleteItemCategory(\x22','7929846BKclal','Description','PendingCounter','</td>','trim','<td><span\x20class=\x22action-edit-button\x22><a\x20onclick=OpenUpdateModalPopup(\x22'];a0_0x5460=function(){return _0x4d3b01;};return a0_0x5460();}function GetItemTypeForListName(_0x39c7a2){var _0x523ed2=a0_0x2cc709;return _0x523ed2(0x12d)+_0x39c7a2[_0x523ed2(0xed)](0x0)[_0x523ed2(0xf8)]()+_0x39c7a2[_0x523ed2(0xef)]('\x20')['join']('')[_0x523ed2(0x125)](0x1)+_0x523ed2(0xe2);}function a0_0x3f8c(_0x1797ee,_0x58ab01){var _0x5460d6=a0_0x5460();return a0_0x3f8c=function(_0x3f8cee,_0x4ab28b){_0x3f8cee=_0x3f8cee-0xdc;var _0x31271f=_0x5460d6[_0x3f8cee];return _0x31271f;},a0_0x3f8c(_0x1797ee,_0x58ab01);}function AddItemToList(_0x8fe6f5,_0x55b808){var _0x5c1884=a0_0x2cc709,_0x4d9252=$[_0x5c1884(0x10e)]();restQuery='ID';var _0x152da9=currentDepartnemtUrls+_0x5c1884(0x130)+_0x8fe6f5+_0x5c1884(0xff)+restQuery;return $[_0x5c1884(0xe8)]({'url':_0x152da9,'type':_0x5c1884(0x12c),'async':![],'headers':{'accept':_0x5c1884(0x140),'X-RequestDigest':$(_0x5c1884(0xfb))[_0x5c1884(0x12f)](),'content-Type':_0x5c1884(0x140)},'data':JSON[_0x5c1884(0xfd)](_0x55b808),'success':function(_0x40ec80){var _0x2c4865=_0x5c1884,_0x48e291=_0x40ec80['d']['ID'];_0x4d9252[_0x2c4865(0xfa)](_0x40ec80);},'error':function(_0x188deb){var _0x548221=_0x5c1884;alert(JSON[_0x548221(0xfd)](_0x188deb)),_0x4d9252[_0x548221(0x107)](_0x188deb);}}),_0x4d9252[_0x5c1884(0x10f)]();}function DeleteItemCategory(_0x508de9){var _0x55ff48=a0_0x2cc709,_0x2f991f=confirm(_0x55ff48(0xde));if(_0x2f991f==!![]){var _0x1efc2a=$[_0x55ff48(0x10e)](),_0x35ac9c=currentDepartnemtUrls+_0x55ff48(0xee)+_0x508de9+')';return $[_0x55ff48(0xe8)]({'url':_0x35ac9c,'type':_0x55ff48(0x116),'contentType':_0x55ff48(0x140),'headers':{'Accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST')[_0x55ff48(0x12f)](),'IF-MATCH':'*','X-HTTP-Method':_0x55ff48(0x116)},'success':function(_0x34af72){GetAllCategory(currentDepartnemtUrls),_0x1efc2a['resolve'](_0x34af72);},'error':function(_0xa09aae){var _0x55aefc=_0x55ff48;_0x1efc2a[_0x55aefc(0x107)](JSON[_0x55aefc(0xfd)](_0xa09aae));}}),_0x1efc2a['promise']();}}function OpenUpdateModalPopup(_0x28135e,_0x3d65f0){var _0x1d0356=a0_0x2cc709;categoryId=_0x28135e,_0x3d65f0=unescape(_0x3d65f0),$('#txtCategory')[_0x1d0356(0x12f)](_0x3d65f0),$(_0x1d0356(0x126))[_0x1d0356(0x12a)]('show');}function RedirectOnCategoryTopics(_0x3ab8ca){var _0x1ab76d=a0_0x2cc709;departmentID>0x0&&(document[_0x1ab76d(0x138)][_0x1ab76d(0x120)]=_0x1ab76d(0xf1)+departmentID+_0x1ab76d(0x142)+_0x3ab8ca+_0x1ab76d(0xeb));}function GetParameterValues(_0x8b5723){var _0x269d10=a0_0x2cc709,_0x23ccb6=window[_0x269d10(0x138)][_0x269d10(0x120)]['slice'](window[_0x269d10(0x138)][_0x269d10(0x120)][_0x269d10(0x124)]('?')+0x1)['split']('&');for(var _0x29c586=0x0;_0x29c586<_0x23ccb6[_0x269d10(0x13e)];_0x29c586++){var _0x24a6ee=_0x23ccb6[_0x29c586]['split']('=');if(_0x24a6ee[0x0]==_0x8b5723)return _0x24a6ee[0x1];}}