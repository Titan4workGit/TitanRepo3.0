var a0_0x383bf9=a0_0x3541;(function(_0x5cae76,_0x22990e){var _0x4ad569=a0_0x3541,_0x188c77=_0x5cae76();while(!![]){try{var _0x378624=-parseInt(_0x4ad569(0x1cc))/0x1+-parseInt(_0x4ad569(0x1ca))/0x2+-parseInt(_0x4ad569(0x217))/0x3+parseInt(_0x4ad569(0x1c5))/0x4*(-parseInt(_0x4ad569(0x1ee))/0x5)+-parseInt(_0x4ad569(0x1b2))/0x6+parseInt(_0x4ad569(0x1af))/0x7*(-parseInt(_0x4ad569(0x1bc))/0x8)+parseInt(_0x4ad569(0x206))/0x9;if(_0x378624===_0x22990e)break;else _0x188c77['push'](_0x188c77['shift']());}catch(_0x3f9ee9){_0x188c77['push'](_0x188c77['shift']());}}}(a0_0x2cf0,0x60ee0));function a0_0x3541(_0x7a7963,_0x230d9c){var _0x2cf0e6=a0_0x2cf0();return a0_0x3541=function(_0x35414b,_0x34d504){_0x35414b=_0x35414b-0x1a9;var _0x5ce893=_0x2cf0e6[_0x35414b];return _0x5ce893;},a0_0x3541(_0x7a7963,_0x230d9c);}var currentCompanyid='',getCurrentCompanySiteURL='';$(document)[a0_0x383bf9(0x1d7)](function(){var _0x3ede8d=a0_0x383bf9;currentCompanyid=titanForWork[_0x3ede8d(0x1c2)](_0x3ede8d(0x1cd));var _0x5b252e=new Array();_0x5b252e[_0x3ede8d(0x1db)](_0x3ede8d(0x1c6));var _0x41be4a=UserExistInProcessApprover(currentCompanyid,'',_0x5b252e);for(var _0x5fcc08=0x0;_0x5fcc08<_0x41be4a[_0x3ede8d(0x1c0)];_0x5fcc08++){if(_0x41be4a[_0x5fcc08][_0x3ede8d(0x1ef)]==_0x3ede8d(0x1c6))$(_0x3ede8d(0x1a9))['show']();else{}}$(_0x3ede8d(0x1a9))['is'](':visible')==![]&&$(_0x3ede8d(0x1d8))[_0x3ede8d(0x1b1)](_0x3ede8d(0x1d0));$('#occasiondate')[_0x3ede8d(0x1b7)]({'changeMonth':!![],'changeYear':!![],'yearRange':'-1:+0'}),$(_0x3ede8d(0x1b3))[_0x3ede8d(0x1b7)]('option',_0x3ede8d(0x204),_0x3ede8d(0x203));currentCompanyid!=null&&currentCompanyid!=''&&(currentCompanyid[_0x3ede8d(0x1cb)]('#')!=-0x1&&(currentCompanyid=currentCompanyid[_0x3ede8d(0x1d3)]('#')[0x0]),currentCompanyid=currentCompanyid);GetCompanyEmployees(currentCompanyid,'BindDropDown'),$(_0x3ede8d(0x1b8))[_0x3ede8d(0x1f3)](function(){var _0x38e4d8=_0x3ede8d;GetCompanyEmployees($(this)[_0x38e4d8(0x1e8)](),_0x38e4d8(0x1ff));}),$(_0x3ede8d(0x1ce))[_0x3ede8d(0x208)](function(){AddOccasion();}),$(_0x3ede8d(0x1e2))[_0x3ede8d(0x208)](function(){redirectCancel();});var _0x27897a=titanForWork[_0x3ede8d(0x1c2)]('itemId'),_0x1f6031=GetSiteUrl();getCurrentCompanySiteURL=_0x1f6031,BindOccasiontype(),_0x27897a!=''&&_0x27897a!=null&&LoadOccasions(getCurrentCompanySiteURL,_0x27897a);});function BindOccasiontype(){var _0x210949=a0_0x383bf9;$[_0x210949(0x1de)]({'url':_spPageContextInfo[_0x210949(0x213)]+_0x210949(0x1f5),'type':_0x210949(0x210),'async':![],'headers':{'accept':_0x210949(0x1f9)},'success':function(_0x3d89ab){var _0x4e8805=_0x210949,_0x31674b=_0x3d89ab['d'][_0x4e8805(0x216)];for(var _0x8d5a79=0x0;_0x8d5a79<_0x31674b[_0x4e8805(0x1c0)];_0x8d5a79++){var _0x54df93=_0x31674b[_0x8d5a79][_0x4e8805(0x1e5)],_0x4eb289=_0x31674b[_0x8d5a79][_0x4e8805(0x1d5)];$(_0x4e8805(0x1f4))[_0x4e8805(0x1ea)]($(_0x4e8805(0x1e9))[_0x4e8805(0x1bb)](_0x4e8805(0x1b5),_0x54df93)[_0x4e8805(0x1b1)](_0x4eb289));}},'error':function(_0x6b4843){var _0x5586dc=_0x210949;alert(JSON[_0x5586dc(0x1da)](_0x6b4843));}});}function GetDateStandardFormat(_0x437041){var _0x136180=a0_0x383bf9,_0x1de3b6=ConvertDateFormatToddMMyyyy(_0x437041),_0x58dd7f=new Date(_0x1de3b6),_0x26a8a8=0x3c*0x3c*0x18*0x3e8,_0x317b0a=new Date(_0x58dd7f[_0x136180(0x1b9)]()),_0xee340f=_0x317b0a['toISOString']();return _0xee340f;}function ConvertDateFormatToddMMyyyy(_0x400924){var _0x547f11=stringToDate(_0x400924,'dd/MM/yyyy','/');return _0x547f11;}function stringToDate(_0x42eed8,_0x2078b2,_0x53df28){var _0x119e8b=a0_0x383bf9,_0x40a824=_0x2078b2['toLowerCase'](),_0x532224=_0x40a824[_0x119e8b(0x1d3)](_0x53df28),_0x566c57=_0x42eed8[_0x119e8b(0x1d3)](_0x53df28),_0x28c439=_0x532224[_0x119e8b(0x1cb)]('mm'),_0x4f0779=_0x532224[_0x119e8b(0x1cb)]('dd'),_0x5d5f80=_0x532224[_0x119e8b(0x1cb)](_0x119e8b(0x1e0)),_0x4b0850=parseInt(_0x566c57[_0x28c439]);_0x4b0850-=0x1;var _0x5f1bd6=new Date(_0x566c57[_0x5d5f80],_0x4b0850,_0x566c57[_0x4f0779]);return _0x5f1bd6;}function AddOccasion(){var _0x58d7d0=a0_0x383bf9,_0x176517=$('#ddlemployee')[_0x58d7d0(0x1e8)]();if(_0x176517!=0x0){var _0x967c4b=$(_0x58d7d0(0x1f4))['val'](),_0x2cc73e='';if($(_0x58d7d0(0x1b3))['val']()==''||$('#occasiondate')['val']()==null){alert(_0x58d7d0(0x202));return;}else _0x2cc73e=GetDateStandardFormat($(_0x58d7d0(0x1b3))[_0x58d7d0(0x1e8)]());if(_0x2cc73e==''||_0x2cc73e==null){alert(_0x58d7d0(0x202));return;}else{var _0x44e950=titanForWork[_0x58d7d0(0x1c2)]('itemId'),_0x5484f5=$(_0x58d7d0(0x1eb))[_0x58d7d0(0x1e8)]();_0x44e950==''||_0x44e950==null?ValidateUserIsAlreadyExistthisOccasion(_0x967c4b,_0x2cc73e,_0x5484f5,'')==!![]?AddNewOccasionDetails(_0x176517,_0x967c4b,_0x2cc73e,_0x5484f5,_0x44e950):alert('Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.'):ValidateUserIsAlreadyExistthisOccasion(_0x967c4b,_0x2cc73e,_0x5484f5,_0x44e950)==!![]?AddNewOccasionDetails(_0x176517,_0x967c4b,_0x2cc73e,_0x5484f5,_0x44e950):alert(_0x58d7d0(0x1f2));}}else alert(_0x58d7d0(0x1aa));}function a0_0x2cf0(){var _0x167fbb=['MobileNumber','join','department','length','log','getQueryStringParameter','EmployeeId','Department','2400212WqVUrs','Occasion','#spandesination','Department\x20:\x20','when','976874TfnPBh','indexOf','770825bvvGqh','CompanyId','#btnsubmit','Manager','You\x20are\x20not\x20authorized\x20to\x20access\x20this\x20page.','promise','Company','split','<option\x20value=\x220\x22>-Select\x20Employee-</option>','OccasionLang1','resolve','ready','#messageNotAthorizedAcces','SP.Data.','stringify','push','OfficeName','Email','ajax','toUpperCase','yyyy','Occasion\x20has\x20been\x20added\x20successfully.','#btncancel','/_api/web/lists/getbytitle(\x27Employees\x27)/items?$select=','\x27\x20and\x20OccasionType\x20eq\x20\x27','OccasionDefault','&$filter=OccasionDate\x20eq\x20\x27','#spandepartment','val','<option></option>','append','#spanemplyeePeopleId','\x27\x20and\x20Status\x20eq\x20\x27Active\x27','/_api/web/lists/getbytitle(\x27','5BVAQWB','webPartName','UserName','empty','Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.','change','#ddlOccasionType','/_api/web/lists/getbytitle(\x27OccasionMaster\x27)/items?$select=OccasionDefault,OccasionLang1,OccasionLang2,OccasionLang3,OccasionLang4,OccasionLang5,OccasionLang6,OccasionLang7,OccasionLang8,OccasionLang9,OccasionLang10','&DepartmentId=','Title','done','application/json;odata=verbose','POST','#empinformation','error','ListItem','?WebAppId=','LoadProfile','\x27)/items','href','Please\x20select\x20Occasion\x20Date.','dd/mm/yy','dateFormat','sourcelocation','33261039jzsIOK','SiteURL','click','\x27)/GetItemById(\x27','show','PATCH','OccasionDate','ID,LogonName/Title,LogonName/UserName,CompanyId&$expand=LogonName&$filter=CompanyId\x20eq\x20\x27','OccasionDetails','DepartmentName','GET','hide','#__REQUESTDIGEST','webAbsoluteUrl','Deferred','/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$filter=ID\x20eq\x20\x27','results','312534lsmIAW','\x27\x20and\x20UserNameId\x20eq\x20\x27','reject','#newOccasionbx','Please\x20select\x20employee.','slice','BindDropDown','Designation','OfficeLocation','3157nreZpK','charAt','text','3638028JwxEsk','#occasiondate','LogonName','value','CompanyName','datepicker','#ddlemployee','getTime','formatDate','attr','12928cnHrTO'];a0_0x2cf0=function(){return _0x167fbb;};return a0_0x2cf0();}function GetSiteUrl(){var _0x1d41d9=a0_0x383bf9,_0x4fb289='',_0x494685='';return _0x4fb289=_spPageContextInfo['webAbsoluteUrl']+'/_api/web/lists/getbytitle(\x27Companies\x27)/items?$select=ID,SiteURL&$filter=ID\x20eq\x20\x27'+currentCompanyid+'\x27',$[_0x1d41d9(0x1de)]({'url':_0x4fb289,'headers':{'Accept':_0x1d41d9(0x1f9)},'async':![],'success':function(_0x337fcc){var _0x3c10d0=_0x1d41d9,_0x37b201=_0x337fcc['d']['results'];_0x37b201['length']>0x0&&(_0x494685=_0x37b201[0x0][_0x3c10d0(0x207)]);},'eror':function(_0x4eedaf){var _0x233a9e=_0x1d41d9;console[_0x233a9e(0x1c1)]('error');}}),_0x494685;}function LoadOccasions(_0x4cfd73,_0xa4d576){var _0x41cfd9=a0_0x383bf9,_0x5b6c1d=_0x4cfd73+_0x41cfd9(0x215)+_0xa4d576+'\x27';$['ajax']({'url':_0x5b6c1d,'headers':{'Accept':_0x41cfd9(0x1f9)},'async':![],'success':function(_0x56b5b8){var _0x2b087d=_0x41cfd9,_0x32fa9d=_0x56b5b8['d'][_0x2b087d(0x216)];if(_0x32fa9d[_0x2b087d(0x1c0)]>0x0){$(_0x2b087d(0x1b8))[_0x2b087d(0x1e8)](_0x32fa9d[0x0]['EmployeeId']);var _0x3c3cb7=new Date(_0x32fa9d[0x0][_0x2b087d(0x20c)]),_0x1032c0='';_0x1032c0=$['datepicker'][_0x2b087d(0x1ba)](_0x2b087d(0x203),_0x3c3cb7),$(_0x2b087d(0x1b3))[_0x2b087d(0x1e8)](_0x1032c0),$(_0x2b087d(0x1f4))[_0x2b087d(0x1e8)](_0x32fa9d[0x0]['OccasionType']),GetCompanyEmployees(_0x32fa9d[0x0][_0x2b087d(0x1c3)],_0x2b087d(0x1ff));}},'eror':function(_0x437a91){var _0x41bd0b=_0x41cfd9;console[_0x41bd0b(0x1c1)](_0x41bd0b(0x1fc));}});}function AddNewOccasionDetails(_0x5c84cc,_0x396540,_0x3e1674,_0x5ad521,_0x25e0f4){var _0x2ed088=a0_0x383bf9,_0x517741=getCurrentCompanySiteURL,_0x56df6e=_0x2ed088(0x20e),_0x54ab55=GetItemTypeForListNameDetails(_0x56df6e),_0x30bf1c;_0x30bf1c={'__metadata':{'type':_0x54ab55},'EmployeeId':_0x5c84cc,'OccasionType':_0x396540,'OccasionDate':_0x3e1674,'Details':_0x396540,'Title':_0x396540,'UserNameId':parseInt(_0x5ad521)},_0x25e0f4==''||_0x25e0f4==null?$['when'](AddItemToList(_0x517741,_0x56df6e,_0x30bf1c))[_0x2ed088(0x1f8)](function(_0x43f620){var _0x15cc40=_0x2ed088;alert(_0x15cc40(0x1e1));}):$[_0x2ed088(0x1c9)](updateItemWithID(_0x517741,_0x56df6e,_0x30bf1c,parseInt(_0x25e0f4)))[_0x2ed088(0x1f8)](function(_0xeb1a0c){alert('Occasion\x20has\x20been\x20updated\x20successfully.');});}function redirectCancel(){var _0x4cd63a=a0_0x383bf9,_0x4cf3d2=titanForWork['getQueryStringParameter'](_0x4cd63a(0x205)),_0x58f672=titanForWork[_0x4cd63a(0x1c2)](_0x4cd63a(0x1bf)),_0x4932c4='';_0x58f672!=null&&_0x58f672!=''&&(_0x4932c4=_0x4cd63a(0x1f6)+_0x58f672);var _0x333783=_0x4cf3d2+_0x4cd63a(0x1fe)+currentCompanyid+_0x4932c4+'&undefinedstr=undefinedstr';$(location)[_0x4cd63a(0x1bb)](_0x4cd63a(0x201),_0x333783);}function GetItemTypeForListNameDetails(_0x640385){var _0x21cded=a0_0x383bf9;return _0x21cded(0x1d9)+_0x640385[_0x21cded(0x1b0)](0x0)[_0x21cded(0x1df)]()+_0x640385['split']('\x20')[_0x21cded(0x1be)]('')[_0x21cded(0x1ab)](0x1)+_0x21cded(0x1fd);}function AddItemToList(_0x10830e,_0x2522fa,_0x3421d3){var _0x1ce282=a0_0x383bf9,_0x372747=$[_0x1ce282(0x214)]();return $[_0x1ce282(0x1de)]({'url':_0x10830e+_0x1ce282(0x1ed)+_0x2522fa+_0x1ce282(0x200),'type':_0x1ce282(0x1fa),'async':![],'headers':{'accept':'application/json;odata=verbose','X-RequestDigest':$(_0x1ce282(0x212))[_0x1ce282(0x1e8)](),'content-Type':_0x1ce282(0x1f9)},'data':JSON[_0x1ce282(0x1da)](_0x3421d3),'success':function(_0x4f03eb){var _0x1531cb=_0x1ce282;_0x372747[_0x1531cb(0x1d6)](_0x4f03eb);},'error':function(_0x1a198c){var _0x219b40=_0x1ce282;alert(JSON[_0x219b40(0x1da)](_0x1a198c)),_0x372747[_0x219b40(0x219)](_0x1a198c);}}),_0x372747[_0x1ce282(0x1d1)]();}function updateItemWithID(_0x4789ac,_0x4fda1c,_0x4a4ffc,_0x38519e){var _0x315fb3=a0_0x383bf9,_0x54e66c=$[_0x315fb3(0x214)]();return $[_0x315fb3(0x1de)]({'url':_0x4789ac+'/_api/web/lists/getbytitle(\x27'+_0x4fda1c+_0x315fb3(0x209)+_0x38519e+'\x27)','type':_0x315fb3(0x1fa),'headers':{'accept':_0x315fb3(0x1f9),'X-RequestDigest':$('#__REQUESTDIGEST')['val'](),'content-Type':'application/json;odata=verbose','X-Http-Method':_0x315fb3(0x20b),'If-Match':'*'},'data':JSON[_0x315fb3(0x1da)](_0x4a4ffc),'async':![],'success':function(_0x3430e4){_0x54e66c['resolve'](!![]);},'error':function(_0x2d94c2){var _0x12c741=_0x315fb3;alert(JSON[_0x12c741(0x1da)](_0x2d94c2)),_0x54e66c[_0x12c741(0x219)](_0x2d94c2);}}),_0x54e66c[_0x315fb3(0x1d1)]();}function GetCompanyEmployees(_0x1ea14c,_0x406298){var _0x5311ef=a0_0x383bf9,_0x222454='';_0x406298=='BindDropDown'&&($('#ddlemployee')[_0x5311ef(0x1f1)]()[_0x5311ef(0x1ea)](_0x5311ef(0x1d4)),_0x222454=_0x5311ef(0x20d)+_0x1ea14c+_0x5311ef(0x1ec));_0x406298==_0x5311ef(0x1ff)&&(_0x222454='ID,JoiningDate,DateOfAnniversary,FullName,DateOfBirth,LogonName/Title,LogonName/ID,LogonName/UserName,OfficeLocation/OfficeName,Email,Department/DepartmentName,Designation,Company/CompanyName,Company/ID,Manager,MobileNumber&$expand=LogonName,Company,Department,OfficeLocation&$filter=ID\x20eq\x20\x27'+_0x1ea14c+_0x5311ef(0x1ec));var _0x2f98d5=_spPageContextInfo[_0x5311ef(0x213)]+_0x5311ef(0x1e3)+_0x222454;$[_0x5311ef(0x1de)]({'url':_0x2f98d5,'headers':{'Accept':_0x5311ef(0x1f9)},'async':![],'success':function(_0x4b1d2b){var _0x584bbe=_0x5311ef,_0x32d3f0=_0x4b1d2b['d'][_0x584bbe(0x216)];_0x32d3f0[_0x584bbe(0x1c0)]==0x0&&$(_0x584bbe(0x1fb))[_0x584bbe(0x211)]();for(var _0x1516c2=0x0;_0x1516c2<_0x32d3f0['length'];_0x1516c2++){if(_0x406298==_0x584bbe(0x1ac)){var _0x52a7d6=_0x32d3f0[_0x1516c2][_0x584bbe(0x1b4)][_0x584bbe(0x1f7)];(_0x52a7d6==null||_0x52a7d6=='')&&(_0x52a7d6='');var _0x42e4d3=_0x32d3f0[_0x1516c2]['ID'];$(_0x584bbe(0x1b8))[_0x584bbe(0x1ea)]($(_0x584bbe(0x1e9))[_0x584bbe(0x1bb)](_0x584bbe(0x1b5),_0x42e4d3)[_0x584bbe(0x1b1)](_0x52a7d6));}if(_0x406298==_0x584bbe(0x1ff)){$(_0x584bbe(0x1fb))[_0x584bbe(0x20a)]();var _0x52a7d6=_0x32d3f0[_0x1516c2]['LogonName']['Title'];(_0x52a7d6==null||_0x52a7d6=='')&&(_0x52a7d6='');var _0x51a2bf=_0x32d3f0[_0x1516c2][_0x584bbe(0x1b4)][_0x584bbe(0x1f0)];(_0x51a2bf==null||_0x51a2bf=='')&&(_0x51a2bf='');var _0x486416=_0x32d3f0[_0x1516c2][_0x584bbe(0x1dd)];(_0x486416==null||_0x486416=='')&&(_0x486416='');var _0x49982a=_0x32d3f0[_0x1516c2][_0x584bbe(0x1b4)]['ID'];$('#spanemplyeePeopleId')['val'](_0x49982a),$('#spanEmailId')['text'](_0x486416);var _0x2de418=_0x32d3f0[_0x1516c2][_0x584bbe(0x1c4)][_0x584bbe(0x20f)];(_0x2de418==null||_0x2de418=='')&&(_0x2de418='');$(_0x584bbe(0x1e7))['text'](_0x584bbe(0x1c8)+_0x2de418);var _0x311cea=_0x32d3f0[_0x1516c2][_0x584bbe(0x1ad)];(_0x311cea==null||_0x311cea=='')&&(_0x311cea='');$(_0x584bbe(0x1c7))[_0x584bbe(0x1b1)](_0x311cea);var _0x1f08e4=_0x32d3f0[_0x1516c2][_0x584bbe(0x1d2)][_0x584bbe(0x1b6)];(_0x1f08e4==null||_0x1f08e4=='')&&(_0x1f08e4='');var _0x560e79=_0x32d3f0[_0x1516c2][_0x584bbe(0x1cf)];(_0x560e79==null||_0x560e79=='')&&(_0x560e79='');var _0x452369=_0x32d3f0[_0x1516c2][_0x584bbe(0x1bd)];(_0x452369==null||_0x452369=='')&&(_0x452369='');var _0x492f7f=_0x32d3f0[_0x1516c2][_0x584bbe(0x1ae)][_0x584bbe(0x1dc)];(_0x492f7f==null||_0x492f7f=='')&&(_0x492f7f=''),$('#spanarea')[_0x584bbe(0x1b1)](_0x492f7f);}}},'eror':function(_0x26e715){var _0x32a26f=_0x5311ef;console[_0x32a26f(0x1c1)](_0x32a26f(0x1fc));}});}function ValidateUserIsAlreadyExistthisOccasion(_0x5201a6,_0x516f0a,_0x504a34,_0x5c9e33){var _0x3c697e=a0_0x383bf9,_0x1d6c52=!![],_0x1d99ef='';_0x1d99ef=_0x3c697e(0x1e6)+_0x516f0a+_0x3c697e(0x218)+_0x504a34+_0x3c697e(0x1e4)+_0x5201a6+'\x27';var _0x2bc62d=getCurrentCompanySiteURL+'/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$top=10'+_0x1d99ef;return $[_0x3c697e(0x1de)]({'url':_0x2bc62d,'headers':{'Accept':_0x3c697e(0x1f9)},'async':![],'success':function(_0x24d740){var _0x298269=_0x3c697e,_0x1bdcf2=_0x24d740['d'][_0x298269(0x216)];if(_0x1bdcf2['length']>0x0)for(var _0x3acec9=0x0;_0x3acec9<_0x1bdcf2['length'];_0x3acec9++){_0x1bdcf2[_0x3acec9]['ID']!=_0x5c9e33&&(_0x1d6c52=![]);}},'eror':function(_0x4a22a4){var _0x138018=_0x3c697e;console[_0x138018(0x1c1)]('error');}}),_0x1d6c52;}