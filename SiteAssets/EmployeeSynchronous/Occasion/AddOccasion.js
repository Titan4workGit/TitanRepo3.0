var a0_0x80697f=a0_0x5050;(function(_0x4c6fd4,_0x23bedd){var _0x9b9311=a0_0x5050,_0x5ca953=_0x4c6fd4();while(!![]){try{var _0x1a2087=-parseInt(_0x9b9311(0x16b))/0x1+-parseInt(_0x9b9311(0x193))/0x2+parseInt(_0x9b9311(0x1b8))/0x3*(-parseInt(_0x9b9311(0x1b1))/0x4)+parseInt(_0x9b9311(0x1b3))/0x5*(parseInt(_0x9b9311(0x178))/0x6)+-parseInt(_0x9b9311(0x1a5))/0x7+parseInt(_0x9b9311(0x174))/0x8+parseInt(_0x9b9311(0x183))/0x9;if(_0x1a2087===_0x23bedd)break;else _0x5ca953['push'](_0x5ca953['shift']());}catch(_0x193874){_0x5ca953['push'](_0x5ca953['shift']());}}}(a0_0x1681,0x61664));function a0_0x1681(){var _0x3def35=['SiteURL','81265xpJnZh','itemId','#occasiondate','CompanyName','formatDate','978699tSzfgp','#empinformation','Occasion\x20has\x20been\x20added\x20successfully.','LoadProfile','Occasion\x20has\x20been\x20updated\x20successfully.','Title','Please\x20select\x20Occasion\x20Date.','Deferred','resolve','#__REQUESTDIGEST','OccasionType','done','toISOString','option','&DepartmentId=','change','hide','stringify','dateFormat','\x27)/items','results','Company','&$filter=OccasionDate\x20eq\x20\x27','ready','val','Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.','OfficeLocation','143305ofjcNi','/_api/web/lists/getbytitle(\x27OccasionMaster\x27)/items?$select=OccasionDefault,OccasionLang1,OccasionLang2,OccasionLang3,OccasionLang4,OccasionLang5,OccasionLang6,OccasionLang7,OccasionLang8,OccasionLang9,OccasionLang10','Email','DepartmentName','href','ajax','EmployeeId','#spanemplyeePeopleId','#ddlemployee','1314448oqDXCI','show','value','webPartName','114puHVvp','PATCH','slice','Manager','log','click','MobileNumber','reject','ID,LogonName/Title,LogonName/UserName,CompanyId&$expand=LogonName&$filter=CompanyId\x20eq\x20\x27','OccasionDefault','department','7054308nEeTKP','#newOccasionbx','indexOf','<option></option>','CompanyId','empty','<option\x20value=\x220\x22>-Select\x20Employee-</option>','text','/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$filter=ID\x20eq\x20\x27','getTime','join','#ddlOccasionType','error','toLowerCase','#btncancel','LogonName','570362xihsIv','ListItem','/_api/web/lists/getbytitle(\x27Employees\x27)/items?$select=','\x27\x20and\x20Status\x20eq\x20\x27Active\x27','\x27)/GetItemById(\x27','attr','webAbsoluteUrl','getQueryStringParameter','/_api/web/lists/getbytitle(\x27','Please\x20select\x20employee.','You\x20are\x20not\x20authorized\x20to\x20access\x20this\x20page.','Occasion','datepicker','push','Department\x20:\x20','OccasionDetails','#spanarea','BindDropDown','722806CfjTJh','UserName','application/json;odata=verbose','/_api/web/lists/getbytitle(\x27Companies\x27)/items?$select=ID,SiteURL&$filter=ID\x20eq\x20\x27','charAt','when','#spanEmailId','length','#messageNotAthorizedAcces','#btnsubmit','Designation','split','4weFHJY'];a0_0x1681=function(){return _0x3def35;};return a0_0x1681();}function a0_0x5050(_0x2a45f6,_0x3d944e){var _0x168116=a0_0x1681();return a0_0x5050=function(_0x505025,_0x34794b){_0x505025=_0x505025-0x167;var _0x155cfd=_0x168116[_0x505025];return _0x155cfd;},a0_0x5050(_0x2a45f6,_0x3d944e);}var currentCompanyid='',getCurrentCompanySiteURL='';$(document)[a0_0x80697f(0x167)](function(){var _0x294c50=a0_0x80697f;currentCompanyid=titanForWork[_0x294c50(0x19a)](_0x294c50(0x187));var _0x5e3933=new Array();_0x5e3933[_0x294c50(0x1a0)]('Occasion');var _0xbadb8a=UserExistInProcessApprover(currentCompanyid,'',_0x5e3933);for(var _0x8b3b68=0x0;_0x8b3b68<_0xbadb8a[_0x294c50(0x1ac)];_0x8b3b68++){if(_0xbadb8a[_0x8b3b68][_0x294c50(0x177)]==_0x294c50(0x19e))$('#newOccasionbx')[_0x294c50(0x175)]();else{}}$(_0x294c50(0x184))['is'](':visible')==![]&&$(_0x294c50(0x1ad))['text'](_0x294c50(0x19d));$(_0x294c50(0x1b5))[_0x294c50(0x19f)]({'changeMonth':!![],'changeYear':!![],'yearRange':'-1:+0'}),$(_0x294c50(0x1b5))[_0x294c50(0x19f)](_0x294c50(0x1c5),_0x294c50(0x1ca),'dd/mm/yy');currentCompanyid!=null&&currentCompanyid!=''&&(currentCompanyid['indexOf']('#')!=-0x1&&(currentCompanyid=currentCompanyid[_0x294c50(0x1b0)]('#')[0x0]),currentCompanyid=currentCompanyid);GetCompanyEmployees(currentCompanyid,_0x294c50(0x1a4)),$(_0x294c50(0x173))[_0x294c50(0x1c7)](function(){var _0x46bac=_0x294c50;GetCompanyEmployees($(this)[_0x46bac(0x168)](),_0x46bac(0x1bb));}),$(_0x294c50(0x1ae))['click'](function(){AddOccasion();}),$(_0x294c50(0x191))[_0x294c50(0x17d)](function(){redirectCancel();});var _0x4dcfa0=titanForWork[_0x294c50(0x19a)](_0x294c50(0x1b4)),_0x21a1c2=GetSiteUrl();getCurrentCompanySiteURL=_0x21a1c2,BindOccasiontype(),_0x4dcfa0!=''&&_0x4dcfa0!=null&&LoadOccasions(getCurrentCompanySiteURL,_0x4dcfa0);});function BindOccasiontype(){var _0x18e6c6=a0_0x80697f;$[_0x18e6c6(0x170)]({'url':_spPageContextInfo[_0x18e6c6(0x199)]+_0x18e6c6(0x16c),'type':'GET','async':![],'headers':{'accept':_0x18e6c6(0x1a7)},'success':function(_0x24d92d){var _0x3bba16=_0x18e6c6,_0x3a448c=_0x24d92d['d'][_0x3bba16(0x1cc)];for(var _0x1b7034=0x0;_0x1b7034<_0x3a448c['length'];_0x1b7034++){var _0x1fd0a4=_0x3a448c[_0x1b7034][_0x3bba16(0x181)],_0x2d251d=_0x3a448c[_0x1b7034]['OccasionLang1'];$(_0x3bba16(0x18e))['append']($(_0x3bba16(0x186))[_0x3bba16(0x198)]('value',_0x1fd0a4)['text'](_0x2d251d));}},'error':function(_0x4f8de3){alert(JSON['stringify'](_0x4f8de3));}});}function GetDateStandardFormat(_0x47b9ba){var _0x558798=a0_0x80697f,_0x3ac886=ConvertDateFormatToddMMyyyy(_0x47b9ba),_0x3d9ca8=new Date(_0x3ac886),_0xade050=0x3c*0x3c*0x18*0x3e8,_0x36fdbf=new Date(_0x3d9ca8[_0x558798(0x18c)]()),_0x412308=_0x36fdbf[_0x558798(0x1c4)]();return _0x412308;}function ConvertDateFormatToddMMyyyy(_0x1f3992){var _0x1d1282=stringToDate(_0x1f3992,'dd/MM/yyyy','/');return _0x1d1282;}function stringToDate(_0x5a3030,_0x7722f6,_0x306b4b){var _0x5ed86c=a0_0x80697f,_0x481a2c=_0x7722f6[_0x5ed86c(0x190)](),_0x3a4e10=_0x481a2c[_0x5ed86c(0x1b0)](_0x306b4b),_0x5f335e=_0x5a3030[_0x5ed86c(0x1b0)](_0x306b4b),_0x5b8655=_0x3a4e10[_0x5ed86c(0x185)]('mm'),_0x292050=_0x3a4e10[_0x5ed86c(0x185)]('dd'),_0xc00b8a=_0x3a4e10[_0x5ed86c(0x185)]('yyyy'),_0x32bf82=parseInt(_0x5f335e[_0x5b8655]);_0x32bf82-=0x1;var _0x10a5e7=new Date(_0x5f335e[_0xc00b8a],_0x32bf82,_0x5f335e[_0x292050]);return _0x10a5e7;}function AddOccasion(){var _0x2cd1a4=a0_0x80697f,_0x4af2d0=$(_0x2cd1a4(0x173))[_0x2cd1a4(0x168)]();if(_0x4af2d0!=0x0){var _0x494d5e=$(_0x2cd1a4(0x18e))[_0x2cd1a4(0x168)](),_0xa95be8='';if($(_0x2cd1a4(0x1b5))[_0x2cd1a4(0x168)]()==''||$('#occasiondate')[_0x2cd1a4(0x168)]()==null){alert(_0x2cd1a4(0x1be));return;}else _0xa95be8=GetDateStandardFormat($('#occasiondate')[_0x2cd1a4(0x168)]());if(_0xa95be8==''||_0xa95be8==null){alert(_0x2cd1a4(0x1be));return;}else{var _0x1abb8e=titanForWork[_0x2cd1a4(0x19a)](_0x2cd1a4(0x1b4)),_0x322a9f=$('#spanemplyeePeopleId')[_0x2cd1a4(0x168)]();_0x1abb8e==''||_0x1abb8e==null?ValidateUserIsAlreadyExistthisOccasion(_0x494d5e,_0xa95be8,_0x322a9f,'')==!![]?AddNewOccasionDetails(_0x4af2d0,_0x494d5e,_0xa95be8,_0x322a9f,_0x1abb8e):alert(_0x2cd1a4(0x169)):ValidateUserIsAlreadyExistthisOccasion(_0x494d5e,_0xa95be8,_0x322a9f,_0x1abb8e)==!![]?AddNewOccasionDetails(_0x4af2d0,_0x494d5e,_0xa95be8,_0x322a9f,_0x1abb8e):alert('Occasion\x20is\x20already\x20added\x20for\x20this\x20date\x20and\x20employee.');}}else alert(_0x2cd1a4(0x19c));}function GetSiteUrl(){var _0x4f6aed=a0_0x80697f,_0x5bf59e='',_0x23161c='';return _0x5bf59e=_spPageContextInfo[_0x4f6aed(0x199)]+_0x4f6aed(0x1a8)+currentCompanyid+'\x27',$[_0x4f6aed(0x170)]({'url':_0x5bf59e,'headers':{'Accept':_0x4f6aed(0x1a7)},'async':![],'success':function(_0x1acc26){var _0xc793ba=_0x4f6aed,_0x42b073=_0x1acc26['d'][_0xc793ba(0x1cc)];_0x42b073['length']>0x0&&(_0x23161c=_0x42b073[0x0][_0xc793ba(0x1b2)]);},'eror':function(_0x15a36b){var _0x27f76d=_0x4f6aed;console[_0x27f76d(0x17c)](_0x27f76d(0x18f));}}),_0x23161c;}function LoadOccasions(_0x51faf7,_0x2ec885){var _0xdb22e5=a0_0x80697f,_0x4e9a6b=_0x51faf7+_0xdb22e5(0x18b)+_0x2ec885+'\x27';$[_0xdb22e5(0x170)]({'url':_0x4e9a6b,'headers':{'Accept':_0xdb22e5(0x1a7)},'async':![],'success':function(_0x59e99d){var _0x1dfc4f=_0xdb22e5,_0x170d52=_0x59e99d['d'][_0x1dfc4f(0x1cc)];if(_0x170d52['length']>0x0){$(_0x1dfc4f(0x173))[_0x1dfc4f(0x168)](_0x170d52[0x0][_0x1dfc4f(0x171)]);var _0x2786ee=new Date(_0x170d52[0x0]['OccasionDate']),_0x14b785='';_0x14b785=$[_0x1dfc4f(0x19f)][_0x1dfc4f(0x1b7)]('dd/mm/yy',_0x2786ee),$(_0x1dfc4f(0x1b5))[_0x1dfc4f(0x168)](_0x14b785),$(_0x1dfc4f(0x18e))['val'](_0x170d52[0x0][_0x1dfc4f(0x1c2)]),GetCompanyEmployees(_0x170d52[0x0][_0x1dfc4f(0x171)],'LoadProfile');}},'eror':function(_0x3c92d7){var _0x436fd5=_0xdb22e5;console[_0x436fd5(0x17c)](_0x436fd5(0x18f));}});}function AddNewOccasionDetails(_0x2d5225,_0x396bc1,_0x1a014b,_0x152def,_0x28bcf3){var _0x2eac50=a0_0x80697f,_0x30310e=getCurrentCompanySiteURL,_0x35a1f6=_0x2eac50(0x1a2),_0x448a19=GetItemTypeForListNameDetails(_0x35a1f6),_0x6c92dd;_0x6c92dd={'__metadata':{'type':_0x448a19},'EmployeeId':_0x2d5225,'OccasionType':_0x396bc1,'OccasionDate':_0x1a014b,'Details':_0x396bc1,'Title':_0x396bc1,'UserNameId':parseInt(_0x152def)},_0x28bcf3==''||_0x28bcf3==null?$[_0x2eac50(0x1aa)](AddItemToList(_0x30310e,_0x35a1f6,_0x6c92dd))[_0x2eac50(0x1c3)](function(_0xf4f5ca){var _0x291914=_0x2eac50;alert(_0x291914(0x1ba));}):$[_0x2eac50(0x1aa)](updateItemWithID(_0x30310e,_0x35a1f6,_0x6c92dd,parseInt(_0x28bcf3)))['done'](function(_0x107309){var _0x4c9551=_0x2eac50;alert(_0x4c9551(0x1bc));});}function redirectCancel(){var _0x4b3342=a0_0x80697f,_0x2bbcd5=titanForWork[_0x4b3342(0x19a)]('sourcelocation'),_0x305ee3=titanForWork['getQueryStringParameter'](_0x4b3342(0x182)),_0x4893e3='';_0x305ee3!=null&&_0x305ee3!=''&&(_0x4893e3=_0x4b3342(0x1c6)+_0x305ee3);var _0xdda1ae=_0x2bbcd5+'?WebAppId='+currentCompanyid+_0x4893e3+'&undefinedstr=undefinedstr';$(location)[_0x4b3342(0x198)](_0x4b3342(0x16f),_0xdda1ae);}function GetItemTypeForListNameDetails(_0x53d50d){var _0x2dbff1=a0_0x80697f;return'SP.Data.'+_0x53d50d[_0x2dbff1(0x1a9)](0x0)['toUpperCase']()+_0x53d50d[_0x2dbff1(0x1b0)]('\x20')[_0x2dbff1(0x18d)]('')[_0x2dbff1(0x17a)](0x1)+_0x2dbff1(0x194);}function AddItemToList(_0x2de2ba,_0x54d21c,_0x28543a){var _0x38dc74=a0_0x80697f,_0x429d56=$[_0x38dc74(0x1bf)]();return $[_0x38dc74(0x170)]({'url':_0x2de2ba+_0x38dc74(0x19b)+_0x54d21c+_0x38dc74(0x1cb),'type':'POST','async':![],'headers':{'accept':_0x38dc74(0x1a7),'X-RequestDigest':$(_0x38dc74(0x1c1))[_0x38dc74(0x168)](),'content-Type':_0x38dc74(0x1a7)},'data':JSON['stringify'](_0x28543a),'success':function(_0x1f8830){_0x429d56['resolve'](_0x1f8830);},'error':function(_0xda2f45){var _0x5ed7ec=_0x38dc74;alert(JSON['stringify'](_0xda2f45)),_0x429d56[_0x5ed7ec(0x17f)](_0xda2f45);}}),_0x429d56['promise']();}function updateItemWithID(_0x39d961,_0x505651,_0x14b016,_0x14252f){var _0x27f4c3=a0_0x80697f,_0x3ed431=$['Deferred']();return $[_0x27f4c3(0x170)]({'url':_0x39d961+_0x27f4c3(0x19b)+_0x505651+_0x27f4c3(0x197)+_0x14252f+'\x27)','type':'POST','headers':{'accept':_0x27f4c3(0x1a7),'X-RequestDigest':$(_0x27f4c3(0x1c1))[_0x27f4c3(0x168)](),'content-Type':_0x27f4c3(0x1a7),'X-Http-Method':_0x27f4c3(0x179),'If-Match':'*'},'data':JSON['stringify'](_0x14b016),'async':![],'success':function(_0x313fbb){var _0x36dc0d=_0x27f4c3;_0x3ed431[_0x36dc0d(0x1c0)](!![]);},'error':function(_0x3e664d){var _0x2ef80d=_0x27f4c3;alert(JSON[_0x2ef80d(0x1c9)](_0x3e664d)),_0x3ed431[_0x2ef80d(0x17f)](_0x3e664d);}}),_0x3ed431['promise']();}function GetCompanyEmployees(_0x16bbbf,_0x80d453){var _0x5c2262=a0_0x80697f,_0x358af9='';_0x80d453==_0x5c2262(0x1a4)&&($(_0x5c2262(0x173))[_0x5c2262(0x188)]()['append'](_0x5c2262(0x189)),_0x358af9=_0x5c2262(0x180)+_0x16bbbf+_0x5c2262(0x196));_0x80d453==_0x5c2262(0x1bb)&&(_0x358af9='ID,JoiningDate,DateOfAnniversary,FullName,DateOfBirth,LogonName/Title,LogonName/ID,LogonName/UserName,OfficeLocation/OfficeName,Email,Department/DepartmentName,Designation,Company/CompanyName,Company/ID,Manager,MobileNumber&$expand=LogonName,Company,Department,OfficeLocation&$filter=ID\x20eq\x20\x27'+_0x16bbbf+'\x27\x20and\x20Status\x20eq\x20\x27Active\x27');var _0x2be616=_spPageContextInfo['webAbsoluteUrl']+_0x5c2262(0x195)+_0x358af9;$['ajax']({'url':_0x2be616,'headers':{'Accept':_0x5c2262(0x1a7)},'async':![],'success':function(_0x1949a9){var _0x438e66=_0x5c2262,_0x3270c3=_0x1949a9['d'][_0x438e66(0x1cc)];_0x3270c3[_0x438e66(0x1ac)]==0x0&&$(_0x438e66(0x1b9))[_0x438e66(0x1c8)]();for(var _0x7636d3=0x0;_0x7636d3<_0x3270c3[_0x438e66(0x1ac)];_0x7636d3++){if(_0x80d453=='BindDropDown'){var _0x18e57e=_0x3270c3[_0x7636d3]['LogonName']['Title'];(_0x18e57e==null||_0x18e57e=='')&&(_0x18e57e='');var _0x1708e5=_0x3270c3[_0x7636d3]['ID'];$(_0x438e66(0x173))['append']($('<option></option>')[_0x438e66(0x198)](_0x438e66(0x176),_0x1708e5)['text'](_0x18e57e));}if(_0x80d453==_0x438e66(0x1bb)){$(_0x438e66(0x1b9))['show']();var _0x18e57e=_0x3270c3[_0x7636d3][_0x438e66(0x192)][_0x438e66(0x1bd)];(_0x18e57e==null||_0x18e57e=='')&&(_0x18e57e='');var _0x120f74=_0x3270c3[_0x7636d3][_0x438e66(0x192)][_0x438e66(0x1a6)];(_0x120f74==null||_0x120f74=='')&&(_0x120f74='');var _0x48249b=_0x3270c3[_0x7636d3][_0x438e66(0x16d)];(_0x48249b==null||_0x48249b=='')&&(_0x48249b='');var _0x54c39f=_0x3270c3[_0x7636d3][_0x438e66(0x192)]['ID'];$(_0x438e66(0x172))[_0x438e66(0x168)](_0x54c39f),$(_0x438e66(0x1ab))['text'](_0x48249b);var _0x2026ab=_0x3270c3[_0x7636d3]['Department'][_0x438e66(0x16e)];(_0x2026ab==null||_0x2026ab=='')&&(_0x2026ab='');$('#spandepartment')[_0x438e66(0x18a)](_0x438e66(0x1a1)+_0x2026ab);var _0x37aae9=_0x3270c3[_0x7636d3][_0x438e66(0x1af)];(_0x37aae9==null||_0x37aae9=='')&&(_0x37aae9='');$('#spandesination')[_0x438e66(0x18a)](_0x37aae9);var _0x1b07c1=_0x3270c3[_0x7636d3][_0x438e66(0x1cd)][_0x438e66(0x1b6)];(_0x1b07c1==null||_0x1b07c1=='')&&(_0x1b07c1='');var _0x15d77b=_0x3270c3[_0x7636d3][_0x438e66(0x17b)];(_0x15d77b==null||_0x15d77b=='')&&(_0x15d77b='');var _0x44cb68=_0x3270c3[_0x7636d3][_0x438e66(0x17e)];(_0x44cb68==null||_0x44cb68=='')&&(_0x44cb68='');var _0x1bdde4=_0x3270c3[_0x7636d3][_0x438e66(0x16a)]['OfficeName'];(_0x1bdde4==null||_0x1bdde4=='')&&(_0x1bdde4=''),$(_0x438e66(0x1a3))[_0x438e66(0x18a)](_0x1bdde4);}}},'eror':function(_0x16f99a){var _0x7a2950=_0x5c2262;console[_0x7a2950(0x17c)](_0x7a2950(0x18f));}});}function ValidateUserIsAlreadyExistthisOccasion(_0x27de6c,_0x383c79,_0x29e35f,_0x53bb4a){var _0x2b3e2d=a0_0x80697f,_0x32f3f5=!![],_0x3373d1='';_0x3373d1=_0x2b3e2d(0x1ce)+_0x383c79+'\x27\x20and\x20UserNameId\x20eq\x20\x27'+_0x29e35f+'\x27\x20and\x20OccasionType\x20eq\x20\x27'+_0x27de6c+'\x27';var _0x2a21f4=getCurrentCompanySiteURL+'/_api/web/lists/getbytitle(\x27OccasionDetails\x27)/items?$select=ID,UserNameId,EmployeeId,OccasionType,OccasionDate,OccasionImageURL&$top=10'+_0x3373d1;return $[_0x2b3e2d(0x170)]({'url':_0x2a21f4,'headers':{'Accept':_0x2b3e2d(0x1a7)},'async':![],'success':function(_0x1a47ad){var _0x498ec1=_0x2b3e2d,_0x29765b=_0x1a47ad['d'][_0x498ec1(0x1cc)];if(_0x29765b['length']>0x0)for(var _0x12915a=0x0;_0x12915a<_0x29765b[_0x498ec1(0x1ac)];_0x12915a++){_0x29765b[_0x12915a]['ID']!=_0x53bb4a&&(_0x32f3f5=![]);}},'eror':function(_0x5ae584){var _0x10ae30=_0x2b3e2d;console[_0x10ae30(0x17c)](_0x10ae30(0x18f));}}),_0x32f3f5;}