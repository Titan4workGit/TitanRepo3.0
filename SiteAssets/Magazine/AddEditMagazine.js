var a0_0x2074ff=a0_0x177e;(function(_0x166766,_0x48cc39){var _0x32c13f=a0_0x177e,_0x23d205=_0x166766();while(!![]){try{var _0x36434d=-parseInt(_0x32c13f(0x191))/0x1+parseInt(_0x32c13f(0x174))/0x2*(-parseInt(_0x32c13f(0x16f))/0x3)+-parseInt(_0x32c13f(0x165))/0x4+parseInt(_0x32c13f(0x179))/0x5*(parseInt(_0x32c13f(0x18e))/0x6)+parseInt(_0x32c13f(0x168))/0x7+-parseInt(_0x32c13f(0x15f))/0x8*(parseInt(_0x32c13f(0x1a8))/0x9)+parseInt(_0x32c13f(0x16e))/0xa*(parseInt(_0x32c13f(0x1a9))/0xb);if(_0x36434d===_0x48cc39)break;else _0x23d205['push'](_0x23d205['shift']());}catch(_0x48d626){_0x23d205['push'](_0x23d205['shift']());}}}(a0_0x268c,0xdf6a0));var itemid='';$(document)[a0_0x2074ff(0x17d)](function(){var _0x2c64de=a0_0x2074ff;$(_0x2c64de(0x181))[_0x2c64de(0x1a3)](function(){FindDuplicate();});});function FindDuplicate(){var _0x28e537=a0_0x2074ff,_0x10dffb=titanForWork[_0x28e537(0x19a)](_0x28e537(0x151)),_0x5560a8=![],_0x204593=$(_0x28e537(0x178))[_0x28e537(0x195)](),_0x3a80ba=$(_0x28e537(0x15e))[_0x28e537(0x195)](),_0x27b13f=$('#input')[_0x28e537(0x195)]();if(_0x204593[_0x28e537(0x169)]()[_0x28e537(0x184)]==0x0||_0x3a80ba['trim']()[_0x28e537(0x184)]==0x0)return alert(_0x28e537(0x17b)),![];var _0x107e12=_0x10dffb+'/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27'+_0x204593+_0x28e537(0x1a1)+_0x3a80ba+'\x27))&$expand=AttachmentFiles';return itemid!=null&&(_0x107e12=_0x10dffb+_0x28e537(0x19b)+_0x204593+_0x28e537(0x1a1)+_0x3a80ba+_0x28e537(0x16a)+itemid+_0x28e537(0x1a2)),$[_0x28e537(0x197)]({'url':_0x107e12,'type':_0x28e537(0x19c),'cache':!![],'async':![],'headers':{'ACCEPT':'application/json;odata=verbose'},'success':function(_0x46aca2){var _0x714583=_0x28e537;$(_0x46aca2['d'][_0x714583(0x164)])['length']==0x0?(_0x5560a8=!![],AddCurrentUserasTechAdmin()):alert(_0x714583(0x150));},'error':function(){}}),_0x5560a8;}function AddCurrentUserasTechAdmin(){var _0xd74567=a0_0x2074ff,_0x596a5f=$('#input2')[_0xd74567(0x195)]()['trim'](),_0xbfe842=$(_0xd74567(0x15e))[_0xd74567(0x195)](),_0x8d08b0=$('#input')[_0xd74567(0x195)]()[_0xd74567(0x169)](),_0x52a8fa=new Date(_0xbfe842),_0x3d2d30=_0x52a8fa[_0xd74567(0x163)](),_0x332abb=_0x52a8fa[_0xd74567(0x172)]()+0x1,_0x4386b1=_0x52a8fa[_0xd74567(0x186)](),_0x36d093=new Array();_0x36d093[_0xd74567(0x182)]();(_0x596a5f==''||_0xbfe842=='')&&alert(_0xd74567(0x158));var _0x26b020='Magazine_Items',_0x130d8b,_0x4eef00='SP.Data.Magazine_x005f_ItemsListItem';_0x130d8b={'__metadata':{'type':_0x4eef00},'Title':_0x596a5f,'Publish_Date':_0xbfe842,'Volume':_0x8d08b0,'Month':_0x332abb[_0xd74567(0x16c)](),'Year':_0x4386b1[_0xd74567(0x16c)]()};if(itemid==''){if($(_0xd74567(0x153))[_0xd74567(0x195)]()=='')return alert(_0xd74567(0x167)),![];if($(_0xd74567(0x1a6))[_0xd74567(0x195)]()=='')return alert(_0xd74567(0x17f)),![];$[_0xd74567(0x185)](AddItemToList(_0x26b020,_0x130d8b))[_0xd74567(0x1a5)](function(_0x36b39f){var _0x3fa6b1=_0xd74567;AddAttachments(_0x36b39f['d']['Id']),alert(_0x3fa6b1(0x189)),$(_0x3fa6b1(0x178))['val'](''),$('#input1')['val'](''),$(_0x3fa6b1(0x162))[_0x3fa6b1(0x195)](''),location[_0x3fa6b1(0x192)]=_0x3fa6b1(0x19d);});}else $['when'](updateMagazineItemWithID(_0x26b020,_0x130d8b,itemid))['done'](function(_0x326c76){var _0x41a69d=_0xd74567;checkFileExists(itemid),alert(_0x41a69d(0x159)),$(_0x41a69d(0x14d))[_0x41a69d(0x16d)](),$(_0x41a69d(0x178))[_0x41a69d(0x195)](''),$(_0x41a69d(0x15e))[_0x41a69d(0x195)](''),$('#input')[_0x41a69d(0x195)](''),location[_0x41a69d(0x192)]='../Pages/MagazineViewAll.aspx?WebAppId=12';});}function updateMagazineItemWithID(_0x1dfa75,_0x1292da,_0x55755f){var _0x326d49=a0_0x2074ff,_0x39cd29=titanForWork[_0x326d49(0x19a)](_0x326d49(0x151)),_0x39beed=$[_0x326d49(0x199)]();return $['ajax']({'url':_0x39cd29+_0x326d49(0x1a0)+_0x1dfa75+_0x326d49(0x14c)+_0x55755f+'\x27)','type':_0x326d49(0x170),'headers':{'accept':_0x326d49(0x15c),'X-RequestDigest':$(_0x326d49(0x193))[_0x326d49(0x195)](),'content-Type':'application/json;odata=verbose','X-Http-Method':'PATCH','If-Match':'*'},'data':JSON[_0x326d49(0x1aa)](_0x1292da),'async':![],'success':function(_0x4b55bd){var _0xe14c9d=_0x326d49;_0x39beed[_0xe14c9d(0x14e)](!![]);},'error':function(_0xeefdf8){var _0x113755=_0x326d49;alert(JSON['stringify'](_0xeefdf8)),_0x39beed[_0x113755(0x18b)](_0xeefdf8);}}),_0x39beed['promise']();}function a0_0x177e(_0x597c69,_0xe714c2){var _0x268cb9=a0_0x268c();return a0_0x177e=function(_0x177e4b,_0x4ff85c){_0x177e4b=_0x177e4b-0x14c;var _0xad8a65=_0x268cb9[_0x177e4b];return _0xad8a65;},a0_0x177e(_0x597c69,_0xe714c2);}function AddItemToList(_0x3ff2d2,_0x352990){var _0x18c3bd=a0_0x2074ff,_0x37e5db=titanForWork['getQueryStringParameter'](_0x18c3bd(0x151)),_0x5be940=$['Deferred']();return $['ajax']({'url':_0x37e5db+_0x18c3bd(0x1a0)+_0x3ff2d2+'\x27)/items','type':_0x18c3bd(0x170),'async':![],'headers':{'accept':_0x18c3bd(0x15c),'X-RequestDigest':$(_0x18c3bd(0x193))[_0x18c3bd(0x195)](),'content-Type':'application/json;odata=verbose'},'data':JSON[_0x18c3bd(0x1aa)](_0x352990),'success':function(_0x20c51e){var _0x4190d5=_0x18c3bd;console[_0x4190d5(0x161)](_0x3ff2d2),_0x5be940[_0x4190d5(0x14e)](_0x20c51e);},'error':function(_0x549d57){var _0x52236a=_0x18c3bd;alert(_0x52236a(0x15b)+JSON[_0x52236a(0x1aa)](_0x549d57)),_0x5be940[_0x52236a(0x18b)](_0x549d57);}}),_0x5be940['promise']();}function AddAttachments(_0x1f016d){var _0x328417=a0_0x2074ff,_0x257fc6=titanForWork[_0x328417(0x19a)](_0x328417(0x151)),_0x1330d7='';$[_0x328417(0x197)]({'url':_spPageContextInfo[_0x328417(0x166)]+_0x328417(0x152),'method':'POST','async':![],'headers':{'ACCEPT':'application/json;odata=verbose','content-type':'application/json;odata=verbose'},'success':function(_0x3ebb5a){var _0x565702=_0x328417;_0x1330d7=_0x3ebb5a['d']['GetContextWebInformation'][_0x565702(0x188)];},'error':function(_0x17888f){}})[_0x328417(0x1a5)](function(){var _0x1f6c8f=_0x328417,_0x31cc21=$(_0x1f6c8f(0x153)),_0x1be70f=$(_0x1f6c8f(0x153))[_0x1f6c8f(0x195)]();if(_0x1be70f[_0x1f6c8f(0x184)]>0x0){var _0x2c4795=_0x31cc21[0x0]['files'][0x0][_0x1f6c8f(0x155)],_0x51e768=new FileReader();_0x51e768[_0x1f6c8f(0x15d)]=function(_0x17aafc){var _0x3da12b=_0x1f6c8f,_0x483fbb=_0x17aafc[_0x3da12b(0x196)]['result'],_0x231507=$['ajax']({'url':_0x257fc6+'/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27'+_0x1f016d+_0x3da12b(0x18f)+_0x2c4795+'\x27)','method':'POST','binaryStringRequestBody':!![],'data':_0x483fbb,'processData':![],'async':![],'headers':{'ACCEPT':'application/json;odata=verbose','X-RequestDigest':_0x1330d7},'success':function(_0x5be330){var _0x5b9978=_0x3da12b;console[_0x5b9978(0x161)](_0x5b9978(0x154));},'error':function(_0x2ea651){var _0x402739=_0x3da12b;alert(_0x402739(0x14f)+_0x2ea651[_0x402739(0x173)]);}});};};_0x1be70f['length']>0x1&&_0x51e768[_0x1f6c8f(0x15a)](_0x31cc21[0x0][_0x1f6c8f(0x180)][0x0]);})[_0x328417(0x1a5)](function(){var _0x415acd=_0x328417;debugger;var _0x50686f=$('#file2'),_0x233799=$('#file2')[_0x415acd(0x195)]();if(_0x233799[_0x415acd(0x184)]>0x1){var _0x537e5d=_0x50686f[0x0][_0x415acd(0x180)][0x0][_0x415acd(0x155)],_0x2aed9f=new FileReader();_0x2aed9f['onload']=function(_0x13fc83){var _0x50f562=_0x415acd,_0x191e33=_0x13fc83[_0x50f562(0x196)][_0x50f562(0x17c)],_0x5373ca=$[_0x50f562(0x197)]({'url':_0x257fc6+_0x50f562(0x18c)+_0x1f016d+'\x27)/AttachmentFiles/\x20add(FileName=\x27'+_0x537e5d+'\x27)','method':'POST','binaryStringRequestBody':!![],'data':_0x191e33,'processData':![],'async':![],'headers':{'ACCEPT':'application/json;odata=verbose','X-RequestDigest':_0x1330d7},'success':function(_0x17e665){var _0x37ae07=_0x50f562;console['log'](_0x37ae07(0x17a)+_0x17e665);},'error':function(_0x25fe36){var _0x277518=_0x50f562;alert(_0x277518(0x14f)+_0x25fe36['responseText']);}});};};_0x233799['length']>0x1&&_0x2aed9f['readAsArrayBuffer'](_0x50686f[0x0]['files'][0x0]);});}function a0_0x268c(){var _0x41be46=['#mazinemodle','resolve','Error\x20occured.','Duplicate\x20Magazine\x20found.','CompanySiteUrl','/_api/contextinfo','#file1','Save\x20img','name','pop','Volume','Fill\x20all\x20mandatory\x20fields!','Updated\x20successfully.','readAsArrayBuffer','Failure\x20:\x20','application/json;odata=verbose','onload','#input1','2864KEtUyv','/_api/web/lists/GetByTitle(\x27','log','#input','getDate','results','434220cTzXSo','webAbsoluteUrl','Please\x20attach\x20a\x20cover.\x20','8529164RAQQMn','trim','\x27))and\x20ID\x20ne\x20\x27','/_api/web/lists/getbytitle(\x27Magazine_items\x27)/items?$select=','toString','hide','30jgWeYd','5703XANuIZ','POST','Title','getMonth','responseText','146Iuiukl','split','FileName','value','#input2','115cHFpLR','Save\x20pdf','Please\x20fill\x20all\x20required\x20fields.','result','ready','/_api/web/Lists/GetByTitle(\x27Magazine_items\x27)/Items(\x27','Please\x20attach\x20a\x20magazine.\x20','files','#Submit','push',')/AttachmentFiles/getByFileName(\x27','length','when','getFullYear','getElementById','FormDigestValue','Added\x20successfully.','AttachmentFiles','reject','/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27','\x27)/GetItemById(','102684gRWEKD','\x27)/AttachmentFiles/\x20add(FileName=\x27','Attachments','1280892seGVoQ','href','#__REQUESTDIGEST','DELETE','val','target','ajax','\x27)?$select=*&$expand=AttachmentFiles','Deferred','getQueryStringParameter','/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27','GET','../Pages/MagazineViewAll.aspx?WebAppId=12','__REQUESTDIGEST','pdf','/_api/web/lists/getbytitle(\x27','\x27)\x20and\x20(Publish_Date\x20eq\x20\x27','\x27&$expand=AttachmentFiles','click','application/json;\x20odata=verbose','done','#file2','modal','33849fteJNt','7984856hvxPsr','stringify','\x27)/GetItemById(\x27'];a0_0x268c=function(){return _0x41be46;};return a0_0x268c();}function BindMagazine(_0x445eee){var _0x1d6177=a0_0x2074ff;debugger;$(_0x1d6177(0x14d))[_0x1d6177(0x1a7)](),itemid=_0x445eee;var _0x3700fb=titanForWork['getQueryStringParameter'](_0x1d6177(0x151)),_0x54f27f='';_0x54f27f='ID,Title,Publish_Date,Volume,Month,Year&$filter=ID\x20eq\x20\x27'+itemid+'\x27';var _0x2de3eb=_0x3700fb+_0x1d6177(0x16b)+_0x54f27f;$['ajax']({'url':_0x2de3eb,'headers':{'Accept':_0x1d6177(0x15c)},'async':![],'success':function(_0x2672c3){var _0x3892a1=_0x1d6177,_0x55be16=_0x2672c3['d'][_0x3892a1(0x164)];for(var _0xc59b6c=0x0;_0xc59b6c<_0x55be16[_0x3892a1(0x184)];_0xc59b6c++){var _0x4bcc59=new Date(_0x55be16[_0xc59b6c]['Publish_Date']),_0x26709c=_0x4bcc59[_0x3892a1(0x163)](),_0x26bd15=_0x4bcc59['getMonth']()+0x1,_0x222fb5=_0x4bcc59[_0x3892a1(0x186)](),_0xff6c0f=_0x26bd15+'/'+_0x26709c+'/'+_0x222fb5,_0x36a8f9=_0x55be16[_0xc59b6c][_0x3892a1(0x171)],_0x5313c7=_0xff6c0f[_0x3892a1(0x16c)](),_0x3ea305=_0x55be16[_0xc59b6c][_0x3892a1(0x157)];$(_0x3892a1(0x178))[_0x3892a1(0x195)](_0x36a8f9),$(_0x3892a1(0x15e))['val'](_0x5313c7),$(_0x3892a1(0x162))[_0x3892a1(0x195)](_0x3ea305);}},'eror':function(_0x27dd71){var _0x385dbe=_0x1d6177;console[_0x385dbe(0x161)]('error');}});}function checkFileExists(_0x19334c){var _0x601698=a0_0x2074ff;Handler=this;var _0x407991='',_0x1b0847=titanForWork['getQueryStringParameter'](_0x601698(0x151));$[_0x601698(0x197)]({'url':_0x1b0847+_0x601698(0x17e)+_0x19334c+_0x601698(0x198),'method':_0x601698(0x19c),'headers':{'Accept':_0x601698(0x1a4)},'async':![],'success':function(_0x16329c){var _0x592f88=_0x601698,_0x3ab79d=_0x16329c['d'];if(_0x16329c['d'][_0x592f88(0x190)]==!![])for(var _0x2bf5ba=0x0;_0x2bf5ba<_0x16329c['d'][_0x592f88(0x18a)][_0x592f88(0x164)]['length'];_0x2bf5ba++){var _0x4fd69c=$(_0x592f88(0x153))[_0x592f88(0x195)](),_0x2e83b5=$(_0x592f88(0x1a6))['val'](),_0x1e74df=_0x16329c['d'][_0x592f88(0x18a)]['results'][_0x2bf5ba][_0x592f88(0x176)],_0x3caeef=_0x1e74df[_0x592f88(0x175)]('.')[_0x592f88(0x156)]();_0x3caeef==_0x592f88(0x19f)?_0x2e83b5['length']>0x0&&DeleteFile(_0x19334c,_0x16329c['d'][_0x592f88(0x18a)][_0x592f88(0x164)][_0x2bf5ba]['FileName']):_0x4fd69c[_0x592f88(0x184)]>0x0&&DeleteFile(_0x19334c,_0x16329c['d'][_0x592f88(0x18a)][_0x592f88(0x164)][_0x2bf5ba][_0x592f88(0x176)]);}AddAttachments(_0x19334c);},'error':function(_0x3e70b4){}});}function DeleteFile(_0x4d942e,_0xdce166){var _0xe055fb=a0_0x2074ff;Handler=this;var _0x24521f='Magazine_items',_0x156cc9=titanForWork[_0xe055fb(0x19a)]('CompanySiteUrl');$[_0xe055fb(0x197)]({'url':_0x156cc9+_0xe055fb(0x160)+_0x24521f+_0xe055fb(0x18d)+_0x4d942e+_0xe055fb(0x183)+_0xdce166+'\x27)\x20\x20','method':_0xe055fb(0x194),'async':![],'headers':{'X-RequestDigest':document[_0xe055fb(0x187)](_0xe055fb(0x19e))[_0xe055fb(0x177)]},'success':function(_0xc93b89){},'error':function(_0x5bfdfb){}});}function ClearFields(){var _0x560493=a0_0x2074ff;$(_0x560493(0x178))[_0x560493(0x195)](''),$(_0x560493(0x15e))[_0x560493(0x195)](''),$('#input')[_0x560493(0x195)]('');}