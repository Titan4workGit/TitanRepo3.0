var a0_0x17add6=a0_0x5c6c;function a0_0x5c6c(_0x11eccd,_0x1d9206){var _0x544855=a0_0x5448();return a0_0x5c6c=function(_0x5c6cc8,_0x5db21a){_0x5c6cc8=_0x5c6cc8-0xf0;var _0x4cc147=_0x544855[_0x5c6cc8];return _0x4cc147;},a0_0x5c6c(_0x11eccd,_0x1d9206);}(function(_0x127f9c,_0x3b89bd){var _0x360416=a0_0x5c6c,_0x3a1adb=_0x127f9c();while(!![]){try{var _0x1df87f=-parseInt(_0x360416(0x11a))/0x1+-parseInt(_0x360416(0x11c))/0x2+parseInt(_0x360416(0xf4))/0x3+-parseInt(_0x360416(0x121))/0x4+-parseInt(_0x360416(0x13b))/0x5+-parseInt(_0x360416(0xf2))/0x6*(-parseInt(_0x360416(0x111))/0x7)+parseInt(_0x360416(0x127))/0x8;if(_0x1df87f===_0x3b89bd)break;else _0x3a1adb['push'](_0x3a1adb['shift']());}catch(_0xecc5e){_0x3a1adb['push'](_0x3a1adb['shift']());}}}(a0_0x5448,0xb1f61));var itemid='';$(document)[a0_0x17add6(0x12c)](function(){var _0x37b25f=a0_0x17add6;$(_0x37b25f(0x138))[_0x37b25f(0x135)](function(){FindDuplicate();});});function FindDuplicate(){var _0x32115a=a0_0x17add6,_0x11224d=titanForWork[_0x32115a(0xf0)](_0x32115a(0x117)),_0x25d2c5=![],_0xb7a6b6=$(_0x32115a(0x136))[_0x32115a(0x108)](),_0x408748=$(_0x32115a(0x13a))[_0x32115a(0x108)](),_0x291957=$(_0x32115a(0x14e))[_0x32115a(0x108)]();if(_0xb7a6b6[_0x32115a(0x11e)]()[_0x32115a(0x10e)]==0x0||_0x408748[_0x32115a(0x11e)]()[_0x32115a(0x10e)]==0x0)return alert('Please\x20fill\x20all\x20required\x20fields.'),![];var _0x60dfd2=_0x11224d+_0x32115a(0x122)+_0xb7a6b6+_0x32115a(0x141)+_0x408748+_0x32115a(0x13d);return itemid!=null&&(_0x60dfd2=_0x11224d+_0x32115a(0x122)+_0xb7a6b6+_0x32115a(0x141)+_0x408748+_0x32115a(0x12d)+itemid+'\x27&$expand=AttachmentFiles'),$[_0x32115a(0x116)]({'url':_0x60dfd2,'type':'GET','cache':!![],'async':![],'headers':{'ACCEPT':_0x32115a(0x148)},'success':function(_0x3faa63){var _0x219a12=_0x32115a;$(_0x3faa63['d']['results'])[_0x219a12(0x10e)]==0x0?(_0x25d2c5=!![],AddCurrentUserasTechAdmin()):alert(_0x219a12(0xf3));},'error':function(){}}),_0x25d2c5;}function AddCurrentUserasTechAdmin(){var _0x339f81=a0_0x17add6,_0x5a1be6=$(_0x339f81(0x136))[_0x339f81(0x108)]()[_0x339f81(0x11e)](),_0x1b4d9e=$('#input1')['val'](),_0x573b6b=$(_0x339f81(0x14e))[_0x339f81(0x108)]()[_0x339f81(0x11e)](),_0x30a557=new Date(_0x1b4d9e),_0xfdf0fc=_0x30a557[_0x339f81(0x11d)](),_0x1f8507=_0x30a557[_0x339f81(0xf8)]()+0x1,_0x4d6ddf=_0x30a557[_0x339f81(0x133)](),_0x5d5ef0=new Array();_0x5d5ef0[_0x339f81(0xfd)]();(_0x5a1be6==''||_0x1b4d9e=='')&&alert(_0x339f81(0x107));var _0x372bc6=_0x339f81(0x142),_0x573ba2,_0x1754c9=_0x339f81(0x13e);_0x573ba2={'__metadata':{'type':_0x1754c9},'Title':_0x5a1be6,'Publish_Date':_0x1b4d9e,'Volume':_0x573b6b,'Month':_0x1f8507[_0x339f81(0x13f)](),'Year':_0x4d6ddf['toString']()};if(itemid==''){if($(_0x339f81(0x128))[_0x339f81(0x108)]()=='')return alert('Please\x20attach\x20a\x20cover.\x20'),![];if($(_0x339f81(0x100))[_0x339f81(0x108)]()=='')return alert(_0x339f81(0x119)),![];$[_0x339f81(0x146)](AddItemToList(_0x372bc6,_0x573ba2))[_0x339f81(0x102)](function(_0x3c9168){var _0x572248=_0x339f81;AddAttachments(_0x3c9168['d']['Id']),alert(_0x572248(0x10c)),$(_0x572248(0x136))[_0x572248(0x108)](''),$(_0x572248(0x13a))[_0x572248(0x108)](''),$(_0x572248(0x14e))['val'](''),location[_0x572248(0x125)]='../Pages/MagazineViewAll.aspx?WebAppId=12';});}else $['when'](updateMagazineItemWithID(_0x372bc6,_0x573ba2,itemid))[_0x339f81(0x102)](function(_0x5957a8){var _0x3039fd=_0x339f81;checkFileExists(itemid),alert(_0x3039fd(0x109)),$(_0x3039fd(0x14a))['hide'](),$(_0x3039fd(0x136))['val'](''),$(_0x3039fd(0x13a))['val'](''),$(_0x3039fd(0x14e))[_0x3039fd(0x108)](''),location['href']=_0x3039fd(0xf9);});}function updateMagazineItemWithID(_0x12f538,_0x4430cf,_0x24291d){var _0x13dd03=a0_0x17add6,_0x5e15a5=titanForWork[_0x13dd03(0xf0)](_0x13dd03(0x117)),_0x147d3e=$[_0x13dd03(0xf6)]();return $['ajax']({'url':_0x5e15a5+'/_api/web/lists/getbytitle(\x27'+_0x12f538+_0x13dd03(0x105)+_0x24291d+'\x27)','type':_0x13dd03(0x132),'headers':{'accept':_0x13dd03(0x148),'X-RequestDigest':$(_0x13dd03(0x143))[_0x13dd03(0x108)](),'content-Type':'application/json;odata=verbose','X-Http-Method':_0x13dd03(0xfe),'If-Match':'*'},'data':JSON[_0x13dd03(0x14b)](_0x4430cf),'async':![],'success':function(_0x104d07){_0x147d3e['resolve'](!![]);},'error':function(_0x534aad){var _0x16fdc5=_0x13dd03;alert(JSON['stringify'](_0x534aad)),_0x147d3e[_0x16fdc5(0x12b)](_0x534aad);}}),_0x147d3e[_0x13dd03(0x106)]();}function AddItemToList(_0x40bd32,_0x2b0f69){var _0x2e1f4f=a0_0x17add6,_0x2a424b=titanForWork[_0x2e1f4f(0xf0)](_0x2e1f4f(0x117)),_0x127d39=$[_0x2e1f4f(0xf6)]();return $['ajax']({'url':_0x2a424b+_0x2e1f4f(0x10d)+_0x40bd32+_0x2e1f4f(0x140),'type':_0x2e1f4f(0x132),'async':![],'headers':{'accept':'application/json;odata=verbose','X-RequestDigest':$('#__REQUESTDIGEST')['val'](),'content-Type':_0x2e1f4f(0x148)},'data':JSON[_0x2e1f4f(0x14b)](_0x2b0f69),'success':function(_0x4145b2){var _0x22c549=_0x2e1f4f;console['log'](_0x40bd32),_0x127d39[_0x22c549(0x131)](_0x4145b2);},'error':function(_0x1d12a5){var _0xdac218=_0x2e1f4f;alert(_0xdac218(0x13c)+JSON[_0xdac218(0x14b)](_0x1d12a5)),_0x127d39[_0xdac218(0x12b)](_0x1d12a5);}}),_0x127d39[_0x2e1f4f(0x106)]();}function AddAttachments(_0x25e5c0){var _0x210458=a0_0x17add6,_0x5d6a79=titanForWork['getQueryStringParameter'](_0x210458(0x117)),_0x331e44='';$['ajax']({'url':_spPageContextInfo[_0x210458(0x10f)]+_0x210458(0x115),'method':'POST','async':![],'headers':{'ACCEPT':_0x210458(0x148),'content-type':_0x210458(0x148)},'success':function(_0x4bb07b){var _0x122d17=_0x210458;_0x331e44=_0x4bb07b['d'][_0x122d17(0x11f)][_0x122d17(0x130)];},'error':function(_0x4b5757){}})[_0x210458(0x102)](function(){var _0x507809=_0x210458,_0x26188f=$('#file1'),_0x224428=$(_0x507809(0x128))[_0x507809(0x108)]();if(_0x224428[_0x507809(0x10e)]>0x0){var _0x5ba4e8=_0x26188f[0x0][_0x507809(0xf5)][0x0]['name'],_0x1f87f4=new FileReader();_0x1f87f4[_0x507809(0x12e)]=function(_0x3c3e70){var _0x3d13=_0x507809,_0x119e6e=_0x3c3e70[_0x3d13(0x113)]['result'],_0x2833c2=$[_0x3d13(0x116)]({'url':_0x5d6a79+_0x3d13(0x114)+_0x25e5c0+'\x27)/AttachmentFiles/\x20add(FileName=\x27'+_0x5ba4e8+'\x27)','method':'POST','binaryStringRequestBody':!![],'data':_0x119e6e,'processData':![],'async':![],'headers':{'ACCEPT':_0x3d13(0x148),'X-RequestDigest':_0x331e44},'success':function(_0x26ca02){var _0x1e7009=_0x3d13;console[_0x1e7009(0x103)]('Save\x20img');},'error':function(_0xa10105){var _0x2656db=_0x3d13;alert('Error\x20occured.'+_0xa10105[_0x2656db(0x137)]);}});};};_0x224428[_0x507809(0x10e)]>0x1&&_0x1f87f4[_0x507809(0x147)](_0x26188f[0x0][_0x507809(0xf5)][0x0]);})['done'](function(){var _0x180751=_0x210458;debugger;var _0x58a1ae=$(_0x180751(0x100)),_0x4f741f=$(_0x180751(0x100))[_0x180751(0x108)]();if(_0x4f741f[_0x180751(0x10e)]>0x1){var _0x6c037=_0x58a1ae[0x0][_0x180751(0xf5)][0x0][_0x180751(0xff)],_0x4f0c36=new FileReader();_0x4f0c36[_0x180751(0x12e)]=function(_0x41d273){var _0x24d779=_0x180751,_0x20d58d=_0x41d273['target']['result'],_0x5bbe5a=$[_0x24d779(0x116)]({'url':_0x5d6a79+_0x24d779(0x114)+_0x25e5c0+_0x24d779(0x118)+_0x6c037+'\x27)','method':'POST','binaryStringRequestBody':!![],'data':_0x20d58d,'processData':![],'async':![],'headers':{'ACCEPT':_0x24d779(0x148),'X-RequestDigest':_0x331e44},'success':function(_0x2bd3e8){var _0x460c5d=_0x24d779;console['log'](_0x460c5d(0x126)+_0x2bd3e8);},'error':function(_0x2db578){var _0x29c856=_0x24d779;alert('Error\x20occured.'+_0x2db578[_0x29c856(0x137)]);}});};};_0x4f741f[_0x180751(0x10e)]>0x1&&_0x4f0c36['readAsArrayBuffer'](_0x58a1ae[0x0][_0x180751(0xf5)][0x0]);});}function BindMagazine(_0x526a65){var _0xbd044f=a0_0x17add6;debugger;$(_0xbd044f(0x14a))[_0xbd044f(0x144)](),itemid=_0x526a65;var _0x19a6b3=titanForWork[_0xbd044f(0xf0)](_0xbd044f(0x117)),_0x514118='';_0x514118=_0xbd044f(0x12f)+itemid+'\x27';var _0x3ab04e=_0x19a6b3+_0xbd044f(0x12a)+_0x514118;$['ajax']({'url':_0x3ab04e,'headers':{'Accept':_0xbd044f(0x148)},'async':![],'success':function(_0x15ed85){var _0x1cb917=_0xbd044f,_0x5ce9d8=_0x15ed85['d'][_0x1cb917(0x11b)];for(var _0x31f2ed=0x0;_0x31f2ed<_0x5ce9d8[_0x1cb917(0x10e)];_0x31f2ed++){var _0x104f70=new Date(_0x5ce9d8[_0x31f2ed][_0x1cb917(0x123)]),_0x25e765=_0x104f70[_0x1cb917(0x11d)](),_0x193b89=_0x104f70[_0x1cb917(0xf8)]()+0x1,_0xc26b62=_0x104f70[_0x1cb917(0x133)](),_0xbee9a=_0x193b89+'/'+_0x25e765+'/'+_0xc26b62,_0x34bdd7=_0x5ce9d8[_0x31f2ed]['Title'],_0x22342e=_0xbee9a[_0x1cb917(0x13f)](),_0x1f18ce=_0x5ce9d8[_0x31f2ed][_0x1cb917(0xfa)];$(_0x1cb917(0x136))['val'](_0x34bdd7),$(_0x1cb917(0x13a))[_0x1cb917(0x108)](_0x22342e),$(_0x1cb917(0x14e))[_0x1cb917(0x108)](_0x1f18ce);}},'eror':function(_0x901681){var _0x29d567=_0xbd044f;console[_0x29d567(0x103)](_0x29d567(0x124));}});}function checkFileExists(_0x2a6a1f){var _0x24cc52=a0_0x17add6;Handler=this;var _0x1364af='',_0x507f17=titanForWork[_0x24cc52(0xf0)](_0x24cc52(0x117));$['ajax']({'url':_0x507f17+_0x24cc52(0x120)+_0x2a6a1f+_0x24cc52(0x104),'method':_0x24cc52(0xf1),'headers':{'Accept':_0x24cc52(0xfb)},'async':![],'success':function(_0x44b095){var _0x5d79f8=_0x24cc52,_0x6efac9=_0x44b095['d'];if(_0x44b095['d'][_0x5d79f8(0x129)]==!![])for(var _0x9138ac=0x0;_0x9138ac<_0x44b095['d'][_0x5d79f8(0x134)][_0x5d79f8(0x11b)]['length'];_0x9138ac++){var _0x19a519=$('#file1')[_0x5d79f8(0x108)](),_0x175c16=$(_0x5d79f8(0x100))['val'](),_0x5df14a=_0x44b095['d'][_0x5d79f8(0x134)]['results'][_0x9138ac][_0x5d79f8(0x110)],_0x4ae47f=_0x5df14a[_0x5d79f8(0x149)]('.')[_0x5d79f8(0x14f)]();_0x4ae47f==_0x5d79f8(0xfc)?_0x175c16[_0x5d79f8(0x10e)]>0x0&&DeleteFile(_0x2a6a1f,_0x44b095['d']['AttachmentFiles']['results'][_0x9138ac]['FileName']):_0x19a519[_0x5d79f8(0x10e)]>0x0&&DeleteFile(_0x2a6a1f,_0x44b095['d'][_0x5d79f8(0x134)][_0x5d79f8(0x11b)][_0x9138ac][_0x5d79f8(0x110)]);}AddAttachments(_0x2a6a1f);},'error':function(_0x4a6cd8){}});}function DeleteFile(_0x1cc849,_0x4a4ed5){var _0x34c287=a0_0x17add6;Handler=this;var _0x47a69e=_0x34c287(0xf7),_0x5f2632=titanForWork[_0x34c287(0xf0)]('CompanySiteUrl');$['ajax']({'url':_0x5f2632+_0x34c287(0x112)+_0x47a69e+_0x34c287(0x10a)+_0x1cc849+_0x34c287(0x139)+_0x4a4ed5+_0x34c287(0x101),'method':_0x34c287(0x10b),'async':![],'headers':{'X-RequestDigest':document[_0x34c287(0x14d)](_0x34c287(0x14c))[_0x34c287(0x145)]},'success':function(_0x35d02e){},'error':function(_0x2d7a6c){}});}function a0_0x5448(){var _0x53dff2=['split','#mazinemodle','stringify','__REQUESTDIGEST','getElementById','#input','pop','getQueryStringParameter','GET','152412TsVXxt','Duplicate\x20Magazine\x20found.','3895026iwMrhi','files','Deferred','Magazine_items','getMonth','../Pages/MagazineViewAll.aspx?WebAppId=12','Volume','application/json;\x20odata=verbose','pdf','push','PATCH','name','#file2','\x27)\x20\x20','done','log','\x27)?$select=*&$expand=AttachmentFiles','\x27)/GetItemById(\x27','promise','Fill\x20all\x20mandatory\x20fields!','val','Updated\x20successfully.','\x27)/GetItemById(','DELETE','Added\x20successfully.','/_api/web/lists/getbytitle(\x27','length','webAbsoluteUrl','FileName','49BZCkuK','/_api/web/lists/GetByTitle(\x27','target','/_api/web/lists/getbytitle(\x27Magazine_Items\x27)/items(\x27','/_api/contextinfo','ajax','CompanySiteUrl','\x27)/AttachmentFiles/\x20add(FileName=\x27','Please\x20attach\x20a\x20magazine.\x20','577051sbRAos','results','150882sfZBmK','getDate','trim','GetContextWebInformation','/_api/web/Lists/GetByTitle(\x27Magazine_items\x27)/Items(\x27','2203092dUJYfG','/_api/Web/Lists/getbytitle(\x27Magazine_items\x27)/Items?$filter=((Title\x20eq\x20\x27','Publish_Date','error','href','Save\x20pdf','13819832FJDyJM','#file1','Attachments','/_api/web/lists/getbytitle(\x27Magazine_items\x27)/items?$select=','reject','ready','\x27))and\x20ID\x20ne\x20\x27','onload','ID,Title,Publish_Date,Volume,Month,Year&$filter=ID\x20eq\x20\x27','FormDigestValue','resolve','POST','getFullYear','AttachmentFiles','click','#input2','responseText','#Submit',')/AttachmentFiles/getByFileName(\x27','#input1','6357205fEUSUr','Failure\x20:\x20','\x27))&$expand=AttachmentFiles','SP.Data.Magazine_x005f_ItemsListItem','toString','\x27)/items','\x27)\x20and\x20(Publish_Date\x20eq\x20\x27','Magazine_Items','#__REQUESTDIGEST','modal','value','when','readAsArrayBuffer','application/json;odata=verbose'];a0_0x5448=function(){return _0x53dff2;};return a0_0x5448();}function ClearFields(){var _0x8b9243=a0_0x17add6;$('#input2')[_0x8b9243(0x108)](''),$('#input1')['val'](''),$('#input')[_0x8b9243(0x108)]('');}