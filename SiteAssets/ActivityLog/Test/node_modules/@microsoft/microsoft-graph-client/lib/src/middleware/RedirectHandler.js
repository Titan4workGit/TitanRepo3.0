'use strict';var a0_0x67ef6c=a0_0x1b26;function a0_0x1b26(_0x2626f8,_0x122890){var _0x230fc8=a0_0x230f();return a0_0x1b26=function(_0x1b261d,_0xa4e4c8){_0x1b261d=_0x1b261d-0xe0;var _0x85e191=_0x230fc8[_0x1b261d];return _0x85e191;},a0_0x1b26(_0x2626f8,_0x122890);}(function(_0x1cbbf3,_0x17268b){var _0x2b49e8=a0_0x1b26,_0x5bab20=_0x1cbbf3();while(!![]){try{var _0x4cff2b=parseInt(_0x2b49e8(0x114))/0x1+-parseInt(_0x2b49e8(0x104))/0x2*(-parseInt(_0x2b49e8(0x100))/0x3)+parseInt(_0x2b49e8(0x112))/0x4+-parseInt(_0x2b49e8(0x113))/0x5+parseInt(_0x2b49e8(0x10a))/0x6+-parseInt(_0x2b49e8(0xf2))/0x7+-parseInt(_0x2b49e8(0xf6))/0x8;if(_0x4cff2b===_0x17268b)break;else _0x5bab20['push'](_0x5bab20['shift']());}catch(_0x4cb6c1){_0x5bab20['push'](_0x5bab20['shift']());}}}(a0_0x230f,0x711d7));Object[a0_0x67ef6c(0xfe)](exports,a0_0x67ef6c(0x107),{'value':!![]}),exports[a0_0x67ef6c(0xe0)]=void 0x0;function a0_0x230f(){var _0x41cebb=['middlewareControl','defineProperty','updateRequestUrl','562764eNHgwQ','MiddlewareControl','__generator','tslib','2iFeCsg','manual','hasLocationHeader','__esModule','REDIRECT_HANDLER_ENABLED','request','3327552gGBzaY','AUTHORIZATION_HEADER','cloneRequestWithNewUrl','url','method','exec','execute','sent','1807000kSAWTC','2742905IXChTr','214911RXUVZy','Location','has','isRelativeURL','prototype','label','MANUAL_REDIRECT','indexOf','setNext','response','RedirectHandler','updateFeatureUsageFlag','STATUS_CODE_SEE_OTHER','GET','Authorization','options','body','./MiddlewareUtil','REDIRECT_STATUS_CODES','TelemetryHandlerOptions','undefined','headers','./options/RedirectHandlerOptions','RequestMethod','redirect','LOCATION_HEADER','__awaiter','://','1620122TxYPwo','getOptions','nextMiddleware','./options/TelemetryHandlerOptions','1323960NAUKlH','executeWithRedirect','shouldDropAuthorizationHeader','getLocationHeader','assign','isRedirect','RedirectHandlerOptions'];a0_0x230f=function(){return _0x41cebb;};return a0_0x230f();}var tslib_1=require(a0_0x67ef6c(0x103)),RequestMethod_1=require('../RequestMethod'),MiddlewareControl_1=require('./MiddlewareControl'),MiddlewareUtil_1=require(a0_0x67ef6c(0xe7)),RedirectHandlerOptions_1=require(a0_0x67ef6c(0xec)),TelemetryHandlerOptions_1=require(a0_0x67ef6c(0xf5)),RedirectHandler=(function(){var _0x1e56be=a0_0x67ef6c;function _0x3b27d6(_0x5b6b53){var _0xc7c987=a0_0x1b26;_0x5b6b53===void 0x0&&(_0x5b6b53=new RedirectHandlerOptions_1[(_0xc7c987(0xfc))]()),this[_0xc7c987(0xe5)]=_0x5b6b53;}return _0x3b27d6[_0x1e56be(0x118)][_0x1e56be(0xfb)]=function(_0x527270){var _0x4c7bef=_0x1e56be;return _0x3b27d6['REDIRECT_STATUS_CODES'][_0x4c7bef(0x11b)](_0x527270['status'])!==-0x1;},_0x3b27d6['prototype'][_0x1e56be(0x106)]=function(_0x248bc9){var _0x2a27d4=_0x1e56be;return _0x248bc9['headers'][_0x2a27d4(0x116)](_0x3b27d6[_0x2a27d4(0xef)]);},_0x3b27d6[_0x1e56be(0x118)][_0x1e56be(0xf9)]=function(_0x524b01){var _0xa88573=_0x1e56be;return _0x524b01[_0xa88573(0xeb)]['get'](_0x3b27d6[_0xa88573(0xef)]);},_0x3b27d6[_0x1e56be(0x118)][_0x1e56be(0x117)]=function(_0x442055){var _0x4c5c36=_0x1e56be;return _0x442055[_0x4c5c36(0x11b)](_0x4c5c36(0xf1))===-0x1;},_0x3b27d6['prototype'][_0x1e56be(0xf8)]=function(_0x5b86b4,_0xfcef59){var _0x425569=_0x1e56be,_0x14649f=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,_0x4f19fc=_0x14649f[_0x425569(0x10f)](_0x5b86b4),_0x14c7e6,_0x483770;_0x4f19fc!==null&&(_0x14c7e6=_0x4f19fc[0x0]);var _0x2982bf=_0x14649f[_0x425569(0x10f)](_0xfcef59);return _0x2982bf!==null&&(_0x483770=_0x2982bf[0x0]),typeof _0x14c7e6!==_0x425569(0xea)&&typeof _0x483770!==_0x425569(0xea)&&_0x14c7e6!==_0x483770;},_0x3b27d6[_0x1e56be(0x118)][_0x1e56be(0xff)]=function(_0x484d6f,_0x199085){var _0x57ef09=_0x1e56be;return tslib_1[_0x57ef09(0xf0)](this,void 0x0,void 0x0,function(){var _0xd3604c,_0x3e4fda;return tslib_1['__generator'](this,function(_0x583fc8){var _0x454e2f=a0_0x1b26;switch(_0x583fc8['label']){case 0x0:_0xd3604c=_0x199085;if(!(typeof _0x199085[_0x454e2f(0x109)]==='string'))return[0x3,0x1];_0x3e4fda=_0x484d6f;return[0x3,0x3];case 0x1:return[0x4,(0x0,MiddlewareUtil_1[_0x454e2f(0x10c)])(_0x484d6f,_0x199085[_0x454e2f(0x109)])];case 0x2:_0x3e4fda=_0x583fc8[_0x454e2f(0x111)](),_0x583fc8['label']=0x3;case 0x3:_0xd3604c[_0x454e2f(0x109)]=_0x3e4fda;return[0x2];}});});},_0x3b27d6['prototype']['getOptions']=function(_0x218d21){var _0x4a6b11=_0x1e56be,_0x53ac63;return _0x218d21[_0x4a6b11(0xfd)]instanceof MiddlewareControl_1[_0x4a6b11(0x101)]&&(_0x53ac63=_0x218d21[_0x4a6b11(0xfd)]['getMiddlewareOptions'](RedirectHandlerOptions_1[_0x4a6b11(0xfc)])),typeof _0x53ac63==='undefined'&&(_0x53ac63=Object[_0x4a6b11(0xfa)](new RedirectHandlerOptions_1[(_0x4a6b11(0xfc))](),this[_0x4a6b11(0xe5)])),_0x53ac63;},_0x3b27d6[_0x1e56be(0x118)][_0x1e56be(0xf7)]=function(_0x15d825,_0x1dfee4,_0x24ea81){return tslib_1['__awaiter'](this,void 0x0,void 0x0,function(){var _0x22f37f,_0x25a7cf;return tslib_1['__generator'](this,function(_0x16f5a1){var _0x49c138=a0_0x1b26;switch(_0x16f5a1['label']){case 0x0:return[0x4,this['nextMiddleware'][_0x49c138(0x110)](_0x15d825)];case 0x1:_0x16f5a1[_0x49c138(0x111)](),_0x22f37f=_0x15d825[_0x49c138(0x11d)];if(!(_0x1dfee4<_0x24ea81['maxRedirects']&&this[_0x49c138(0xfb)](_0x22f37f)&&this['hasLocationHeader'](_0x22f37f)&&_0x24ea81['shouldRedirect'](_0x22f37f)))return[0x3,0x6];++_0x1dfee4;if(!(_0x22f37f['status']===_0x3b27d6[_0x49c138(0xe2)]))return[0x3,0x2];_0x15d825[_0x49c138(0xe5)][_0x49c138(0x10e)]=RequestMethod_1[_0x49c138(0xed)][_0x49c138(0xe3)],delete _0x15d825[_0x49c138(0xe5)][_0x49c138(0xe6)];return[0x3,0x4];case 0x2:_0x25a7cf=this[_0x49c138(0xf9)](_0x22f37f);!this[_0x49c138(0x117)](_0x25a7cf)&&this['shouldDropAuthorizationHeader'](_0x22f37f[_0x49c138(0x10d)],_0x25a7cf)&&delete _0x15d825[_0x49c138(0xe5)]['headers'][_0x3b27d6[_0x49c138(0x10b)]];return[0x4,this[_0x49c138(0xff)](_0x25a7cf,_0x15d825)];case 0x3:_0x16f5a1['sent'](),_0x16f5a1[_0x49c138(0x119)]=0x4;case 0x4:return[0x4,this[_0x49c138(0xf7)](_0x15d825,_0x1dfee4,_0x24ea81)];case 0x5:_0x16f5a1[_0x49c138(0x111)]();return[0x3,0x7];case 0x6:return[0x2];case 0x7:return[0x2];}});});},_0x3b27d6[_0x1e56be(0x118)][_0x1e56be(0x110)]=function(_0x53a2cc){var _0x84fc9e=_0x1e56be;return tslib_1[_0x84fc9e(0xf0)](this,void 0x0,void 0x0,function(){var _0x4002df=_0x84fc9e,_0x568abf,_0x32c90c;return tslib_1[_0x4002df(0x102)](this,function(_0x5a6406){var _0x2345d6=_0x4002df;switch(_0x5a6406['label']){case 0x0:_0x568abf=0x0,_0x32c90c=this[_0x2345d6(0xf3)](_0x53a2cc),_0x53a2cc[_0x2345d6(0xe5)][_0x2345d6(0xee)]=_0x3b27d6['MANUAL_REDIRECT'],TelemetryHandlerOptions_1[_0x2345d6(0xe9)][_0x2345d6(0xe1)](_0x53a2cc,TelemetryHandlerOptions_1['FeatureUsageFlag'][_0x2345d6(0x108)]);return[0x4,this['executeWithRedirect'](_0x53a2cc,_0x568abf,_0x32c90c)];case 0x1:return[0x2,_0x5a6406[_0x2345d6(0x111)]()];}});});},_0x3b27d6[_0x1e56be(0x118)][_0x1e56be(0x11c)]=function(_0x1894ca){var _0x2c6a2f=_0x1e56be;this[_0x2c6a2f(0xf4)]=_0x1894ca;},_0x3b27d6[_0x1e56be(0xe8)]=[0x12d,0x12e,0x12f,0x133,0x134],_0x3b27d6[_0x1e56be(0xe2)]=0x12f,_0x3b27d6[_0x1e56be(0xef)]=_0x1e56be(0x115),_0x3b27d6[_0x1e56be(0x10b)]=_0x1e56be(0xe4),_0x3b27d6[_0x1e56be(0x11a)]=_0x1e56be(0x105),_0x3b27d6;}());exports[a0_0x67ef6c(0xe0)]=RedirectHandler;