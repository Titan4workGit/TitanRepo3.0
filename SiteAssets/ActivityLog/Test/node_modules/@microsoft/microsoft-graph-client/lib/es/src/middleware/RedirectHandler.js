const a0_0x372b89=a0_0x4124;(function(_0x4618e0,_0x404f91){const _0x31efad=a0_0x4124,_0x5d4480=_0x4618e0();while(!![]){try{const _0x328e61=parseInt(_0x31efad(0x14b))/0x1*(parseInt(_0x31efad(0x16f))/0x2)+-parseInt(_0x31efad(0x154))/0x3*(parseInt(_0x31efad(0x15e))/0x4)+parseInt(_0x31efad(0x151))/0x5*(-parseInt(_0x31efad(0x14f))/0x6)+-parseInt(_0x31efad(0x15a))/0x7*(-parseInt(_0x31efad(0x144))/0x8)+parseInt(_0x31efad(0x153))/0x9*(-parseInt(_0x31efad(0x145))/0xa)+parseInt(_0x31efad(0x15d))/0xb*(-parseInt(_0x31efad(0x152))/0xc)+parseInt(_0x31efad(0x162))/0xd*(parseInt(_0x31efad(0x16e))/0xe);if(_0x328e61===_0x404f91)break;else _0x5d4480['push'](_0x5d4480['shift']());}catch(_0x24ea5b){_0x5d4480['push'](_0x5d4480['shift']());}}}(a0_0x1bd5,0x7b12b));import{__awaiter}from'tslib';import{RequestMethod}from'../RequestMethod';import{MiddlewareControl}from'./MiddlewareControl';function a0_0x1bd5(){const _0x4993a2=['Authorization','22RnmNby','8XnPdgM','getMiddlewareOptions','getOptions','execute','75400BYZzsl','REDIRECT_STATUS_CODES','STATUS_CODE_SEE_OTHER','getLocationHeader','undefined','middlewareControl','updateRequestUrl','headers','executeWithRedirect','status','shouldDropAuthorizationHeader','nextMiddleware','6398QCNwKL','14QAynKP','request','550328czrulf','30lAVxZG','response','exec','shouldRedirect','hasLocationHeader','LOCATION_HEADER','11629pjPzZk','isRelativeURL','indexOf','redirect','6bnMTuP','isRedirect','3614265HapDfP','5995644waJudC','592461CIIVJF','668796JYaLIa','updateFeatureUsageFlag','GET','body','MANUAL_REDIRECT','options','14FsxGyX','setNext'];a0_0x1bd5=function(){return _0x4993a2;};return a0_0x1bd5();}import{cloneRequestWithNewUrl}from'./MiddlewareUtil';import{RedirectHandlerOptions}from'./options/RedirectHandlerOptions';import{FeatureUsageFlag,TelemetryHandlerOptions}from'./options/TelemetryHandlerOptions';export class RedirectHandler{constructor(_0x279ca0=new RedirectHandlerOptions()){this['options']=_0x279ca0;}[a0_0x372b89(0x150)](_0x22be40){const _0xd90814=a0_0x372b89;return RedirectHandler[_0xd90814(0x163)][_0xd90814(0x14d)](_0x22be40[_0xd90814(0x16b)])!==-0x1;}[a0_0x372b89(0x149)](_0x229c50){const _0x1d1968=a0_0x372b89;return _0x229c50['headers']['has'](RedirectHandler[_0x1d1968(0x14a)]);}[a0_0x372b89(0x165)](_0xbd7d7b){const _0xf3d4ed=a0_0x372b89;return _0xbd7d7b[_0xf3d4ed(0x169)]['get'](RedirectHandler[_0xf3d4ed(0x14a)]);}['isRelativeURL'](_0xbe62e9){const _0x1b080f=a0_0x372b89;return _0xbe62e9[_0x1b080f(0x14d)]('://')===-0x1;}[a0_0x372b89(0x16c)](_0xb86946,_0x30080d){const _0x51f809=a0_0x372b89,_0x305035=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,_0x4ca7a3=_0x305035[_0x51f809(0x147)](_0xb86946);let _0x3b1c12,_0x565a4f;_0x4ca7a3!==null&&(_0x3b1c12=_0x4ca7a3[0x0]);const _0x285055=_0x305035[_0x51f809(0x147)](_0x30080d);return _0x285055!==null&&(_0x565a4f=_0x285055[0x0]),typeof _0x3b1c12!==_0x51f809(0x166)&&typeof _0x565a4f!==_0x51f809(0x166)&&_0x3b1c12!==_0x565a4f;}[a0_0x372b89(0x168)](_0x21b7e8,_0x5cc61b){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x268a82=a0_0x4124;_0x5cc61b['request']=typeof _0x5cc61b[_0x268a82(0x170)]==='string'?_0x21b7e8:yield cloneRequestWithNewUrl(_0x21b7e8,_0x5cc61b[_0x268a82(0x170)]);});}[a0_0x372b89(0x160)](_0x2fc1d9){const _0x582da8=a0_0x372b89;let _0x31c10d;return _0x2fc1d9[_0x582da8(0x167)]instanceof MiddlewareControl&&(_0x31c10d=_0x2fc1d9['middlewareControl'][_0x582da8(0x15f)](RedirectHandlerOptions)),typeof _0x31c10d===_0x582da8(0x166)&&(_0x31c10d=Object['assign'](new RedirectHandlerOptions(),this[_0x582da8(0x159)])),_0x31c10d;}[a0_0x372b89(0x16a)](_0x3e6361,_0x3a29b1,_0xce9163){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5e37ef=a0_0x4124;yield this[_0x5e37ef(0x16d)][_0x5e37ef(0x161)](_0x3e6361);const _0x201052=_0x3e6361[_0x5e37ef(0x146)];if(_0x3a29b1<_0xce9163['maxRedirects']&&this[_0x5e37ef(0x150)](_0x201052)&&this[_0x5e37ef(0x149)](_0x201052)&&_0xce9163[_0x5e37ef(0x148)](_0x201052)){++_0x3a29b1;if(_0x201052[_0x5e37ef(0x16b)]===RedirectHandler[_0x5e37ef(0x164)])_0x3e6361['options']['method']=RequestMethod[_0x5e37ef(0x156)],delete _0x3e6361[_0x5e37ef(0x159)][_0x5e37ef(0x157)];else{const _0x3da396=this[_0x5e37ef(0x165)](_0x201052);!this[_0x5e37ef(0x14c)](_0x3da396)&&this[_0x5e37ef(0x16c)](_0x201052['url'],_0x3da396)&&delete _0x3e6361[_0x5e37ef(0x159)]['headers'][RedirectHandler['AUTHORIZATION_HEADER']],yield this[_0x5e37ef(0x168)](_0x3da396,_0x3e6361);}yield this[_0x5e37ef(0x16a)](_0x3e6361,_0x3a29b1,_0xce9163);}else return;});}[a0_0x372b89(0x161)](_0x406922){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x469202=a0_0x4124,_0xa13252=0x0,_0x5696cb=this[_0x469202(0x160)](_0x406922);return _0x406922[_0x469202(0x159)][_0x469202(0x14e)]=RedirectHandler[_0x469202(0x158)],TelemetryHandlerOptions[_0x469202(0x155)](_0x406922,FeatureUsageFlag['REDIRECT_HANDLER_ENABLED']),yield this['executeWithRedirect'](_0x406922,_0xa13252,_0x5696cb);});}[a0_0x372b89(0x15b)](_0x61dc86){const _0x5aba0e=a0_0x372b89;this[_0x5aba0e(0x16d)]=_0x61dc86;}}function a0_0x4124(_0x53eb29,_0x3ec3b3){const _0x1bd538=a0_0x1bd5();return a0_0x4124=function(_0x412448,_0x1ee367){_0x412448=_0x412448-0x144;let _0xf709fd=_0x1bd538[_0x412448];return _0xf709fd;},a0_0x4124(_0x53eb29,_0x3ec3b3);}RedirectHandler[a0_0x372b89(0x163)]=[0x12d,0x12e,0x12f,0x133,0x134],RedirectHandler['STATUS_CODE_SEE_OTHER']=0x12f,RedirectHandler[a0_0x372b89(0x14a)]='Location',RedirectHandler['AUTHORIZATION_HEADER']=a0_0x372b89(0x15c),RedirectHandler[a0_0x372b89(0x158)]='manual';