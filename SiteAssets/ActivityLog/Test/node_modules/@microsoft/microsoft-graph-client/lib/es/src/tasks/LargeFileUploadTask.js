const a0_0x3e263c=a0_0x2e35;(function(_0x2c29b0,_0x45de4a){const _0x2d4943=a0_0x2e35,_0x55b079=_0x2c29b0();while(!![]){try{const _0x1bd2b4=parseInt(_0x2d4943(0x177))/0x1+-parseInt(_0x2d4943(0x17a))/0x2+parseInt(_0x2d4943(0x142))/0x3+parseInt(_0x2d4943(0x16a))/0x4*(-parseInt(_0x2d4943(0x15a))/0x5)+-parseInt(_0x2d4943(0x173))/0x6+parseInt(_0x2d4943(0x156))/0x7*(-parseInt(_0x2d4943(0x17e))/0x8)+parseInt(_0x2d4943(0x143))/0x9;if(_0x1bd2b4===_0x45de4a)break;else _0x55b079['push'](_0x55b079['shift']());}catch(_0x53c08d){_0x55b079['push'](_0x55b079['shift']());}}}(a0_0x2720,0x870c1));import{__awaiter}from'tslib';import{GraphClientError}from'../GraphClientError';import{GraphResponseHandler}from'../GraphResponseHandler';import{ResponseType}from'../ResponseType';import{Range}from'./FileUploadTask/Range';function a0_0x2e35(_0x2fd88a,_0x2cad72){const _0x2720c0=a0_0x2720();return a0_0x2e35=function(_0x2e3568,_0x40e828){_0x2e3568=_0x2e3568-0x141;let _0x323f64=_0x2720c0[_0x2e3568];return _0x323f64;},a0_0x2e35(_0x2fd88a,_0x2cad72);}import{UploadResult}from'./FileUploadTask/UploadResult';export class LargeFileUploadTask{static[a0_0x3e263c(0x146)](_0x57e602,_0x5be400,_0x5de59d,_0x10843b={}){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3f7c7c=a0_0x2e35,_0x1ff016=yield _0x57e602[_0x3f7c7c(0x153)](_0x5be400)[_0x3f7c7c(0x14c)](_0x10843b)['post'](_0x5de59d),_0x2b6f1d={'url':_0x1ff016[_0x3f7c7c(0x175)],'expiry':new Date(_0x1ff016[_0x3f7c7c(0x155)]),'isCancelled':![]};return _0x2b6f1d;});}constructor(_0x584c64,_0x37a118,_0x59687a,_0x14c4b8={}){const _0x350be2=a0_0x3e263c;this[_0x350be2(0x14e)]=0x5*0x400*0x400,this[_0x350be2(0x164)]=_0x584c64;if(!_0x37a118[_0x350be2(0x167)])throw new GraphClientError(_0x350be2(0x16c));else this['file']=_0x37a118;this[_0x350be2(0x14d)]=_0x37a118,!_0x14c4b8[_0x350be2(0x176)]&&(_0x14c4b8[_0x350be2(0x176)]=this['DEFAULT_FILE_SIZE']),this['options']=_0x14c4b8,this['uploadSession']=_0x59687a,this[_0x350be2(0x17d)]=new Range(0x0,this[_0x350be2(0x154)][_0x350be2(0x176)]-0x1);}['parseRange'](_0x973206){const _0x375631=a0_0x3e263c,_0x177df1=_0x973206[0x0];if(typeof _0x177df1===_0x375631(0x15d)||_0x177df1==='')return new Range();const _0x55cbd2=_0x177df1[_0x375631(0x170)]('-'),_0x41bec6=parseInt(_0x55cbd2[0x0],0xa);let _0x12975b=parseInt(_0x55cbd2[0x1],0xa);return Number[_0x375631(0x14b)](_0x12975b)&&(_0x12975b=this[_0x375631(0x14d)][_0x375631(0x165)]-0x1),new Range(_0x41bec6,_0x12975b);}['updateTaskStatus'](_0x59fce9){const _0x38f86d=a0_0x3e263c;this['uploadSession'][_0x38f86d(0x148)]=new Date(_0x59fce9[_0x38f86d(0x155)]),this[_0x38f86d(0x17d)]=this[_0x38f86d(0x15c)](_0x59fce9[_0x38f86d(0x152)]);}[a0_0x3e263c(0x168)](){const _0x5d9149=a0_0x3e263c;if(this[_0x5d9149(0x17d)][_0x5d9149(0x16f)]===-0x1)return this['nextRange'];const _0x32c210=this[_0x5d9149(0x17d)][_0x5d9149(0x16f)];let _0x21598a=_0x32c210+this[_0x5d9149(0x154)][_0x5d9149(0x176)]-0x1;return _0x21598a>=this[_0x5d9149(0x14d)][_0x5d9149(0x165)]&&(_0x21598a=this[_0x5d9149(0x14d)]['size']-0x1),new Range(_0x32c210,_0x21598a);}[a0_0x3e263c(0x167)](_0x5cd2fc){const _0x31eb83=a0_0x3e263c;console[_0x31eb83(0x162)](_0x31eb83(0x161));if(this[_0x31eb83(0x14d)][_0x31eb83(0x160)]instanceof ArrayBuffer||this[_0x31eb83(0x14d)][_0x31eb83(0x160)]instanceof Blob||this['file'][_0x31eb83(0x160)]instanceof Uint8Array)return this[_0x31eb83(0x14d)]['content'][_0x31eb83(0x16b)](_0x5cd2fc[_0x31eb83(0x16f)],_0x5cd2fc[_0x31eb83(0x16e)]+0x1);throw new GraphClientError(_0x31eb83(0x172));}[a0_0x3e263c(0x17f)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x384896=a0_0x2e35,_0x30ec05=this[_0x384896(0x154)]&&this[_0x384896(0x154)]['uploadEventHandlers'];while(!this[_0x384896(0x157)]['isCancelled']){const _0x3ad773=this[_0x384896(0x168)]();if(_0x3ad773['maxValue']===-0x1){const _0x10364b=new Error(_0x384896(0x147));_0x10364b[_0x384896(0x15b)]=_0x384896(0x178);throw _0x10364b;}const _0x1c041c=yield this['file'][_0x384896(0x167)](_0x3ad773),_0x1b0b05=yield this[_0x384896(0x163)](_0x1c041c,_0x3ad773,this[_0x384896(0x14d)][_0x384896(0x165)]);if(!_0x1b0b05)throw new GraphClientError(_0x384896(0x171));const _0x358cca=yield GraphResponseHandler[_0x384896(0x17b)](_0x1b0b05);if(_0x1b0b05[_0x384896(0x15f)]===0xc9||_0x1b0b05[_0x384896(0x15f)]===0xc8&&_0x358cca['id'])return this[_0x384896(0x16d)](_0x30ec05,_0x3ad773),UploadResult[_0x384896(0x145)](_0x358cca,_0x1b0b05['headers']);const _0x1298e3={'expirationDateTime':_0x358cca[_0x384896(0x155)]||_0x358cca['ExpirationDateTime'],'nextExpectedRanges':_0x358cca[_0x384896(0x158)]||_0x358cca[_0x384896(0x152)]};this[_0x384896(0x144)](_0x1298e3),this[_0x384896(0x16d)](_0x30ec05,_0x3ad773);}});}[a0_0x3e263c(0x16d)](_0x2fe4e2,_0x50c161){const _0x132129=a0_0x3e263c;_0x2fe4e2&&_0x2fe4e2['progress']&&_0x2fe4e2[_0x132129(0x15e)](_0x50c161,_0x2fe4e2[_0x132129(0x169)]);}[a0_0x3e263c(0x14a)](_0x35fa45,_0x41e743,_0x5bb682){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x48a1a2=a0_0x2e35;return yield this['client'][_0x48a1a2(0x153)](this[_0x48a1a2(0x157)][_0x48a1a2(0x151)])[_0x48a1a2(0x14c)]({'Content-Length':''+(_0x41e743[_0x48a1a2(0x16e)]-_0x41e743[_0x48a1a2(0x16f)]+0x1),'Content-Range':'bytes\x20'+_0x41e743[_0x48a1a2(0x16f)]+'-'+_0x41e743[_0x48a1a2(0x16e)]+'/'+_0x5bb682,'Content-Type':_0x48a1a2(0x150)})[_0x48a1a2(0x17c)](_0x35fa45);});}['uploadSliceGetRawResponse'](_0x2f990a,_0x5d8797,_0x51b2df){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x6840b4=a0_0x2e35;return yield this[_0x6840b4(0x164)]['api'](this[_0x6840b4(0x157)]['url'])['headers']({'Content-Length':''+(_0x5d8797[_0x6840b4(0x16e)]-_0x5d8797[_0x6840b4(0x16f)]+0x1),'Content-Range':'bytes\x20'+_0x5d8797[_0x6840b4(0x16f)]+'-'+_0x5d8797[_0x6840b4(0x16e)]+'/'+_0x51b2df,'Content-Type':_0x6840b4(0x150)})[_0x6840b4(0x159)](ResponseType[_0x6840b4(0x141)])[_0x6840b4(0x17c)](_0x2f990a);});}[a0_0x3e263c(0x179)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xcc0318=a0_0x2e35,_0xa2f36e=yield this[_0xcc0318(0x164)][_0xcc0318(0x153)](this[_0xcc0318(0x157)][_0xcc0318(0x151)])[_0xcc0318(0x159)](ResponseType[_0xcc0318(0x141)])[_0xcc0318(0x14f)]();return _0xa2f36e['status']===0xcc&&(this[_0xcc0318(0x157)][_0xcc0318(0x174)]=!![]),_0xa2f36e;});}[a0_0x3e263c(0x149)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4b50ba=a0_0x2e35,_0x13fbc0=yield this[_0x4b50ba(0x164)][_0x4b50ba(0x153)](this[_0x4b50ba(0x157)][_0x4b50ba(0x151)])['get']();return this['updateTaskStatus'](_0x13fbc0),_0x13fbc0;});}[a0_0x3e263c(0x166)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x101000=a0_0x2e35;return yield this[_0x101000(0x149)](),yield this['upload']();});}[a0_0x3e263c(0x180)](){return this['uploadSession'];}}function a0_0x2720(){const _0x4b734a=['resume','sliceFile','getNextRange','extraCallbackParam','4SbfVkP','slice','Please\x20pass\x20the\x20FileUpload\x20object,\x20StreamUpload\x20object\x20or\x20any\x20custom\x20implementation\x20of\x20the\x20FileObject\x20interface','reportProgress','maxValue','minValue','split','Something\x20went\x20wrong!\x20Large\x20file\x20upload\x20slice\x20response\x20is\x20null.','The\x20LargeFileUploadTask.sliceFile()\x20function\x20expects\x20only\x20Blob,\x20ArrayBuffer\x20or\x20Uint8Array\x20file\x20content.\x20Please\x20note\x20that\x20the\x20sliceFile()\x20function\x20is\x20deprecated.','208620HrRotn','isCancelled','uploadUrl','rangeSize','19011JwlDlX','Invalid\x20Session','cancel','843138uvAmrn','getResponse','put','nextRange','296FaKdmF','upload','getUploadSession','RAW','391755ZovHwR','19269936DPBupM','updateTaskStatus','CreateUploadResult','createUploadSession','Task\x20with\x20which\x20you\x20are\x20trying\x20to\x20upload\x20is\x20already\x20completed,\x20Please\x20check\x20for\x20your\x20uploaded\x20file','expiry','getStatus','uploadSlice','isNaN','headers','file','DEFAULT_FILE_SIZE','delete','application/octet-stream','url','nextExpectedRanges','api','options','expirationDateTime','79457wIUuhk','uploadSession','NextExpectedRanges','responseType','4306105VeaZiy','name','parseRange','undefined','progress','status','content','The\x20LargeFileUploadTask.sliceFile()\x20function\x20has\x20been\x20deprecated\x20and\x20moved\x20into\x20the\x20FileObject\x20interface.','warn','uploadSliceGetRawResponse','client','size'];a0_0x2720=function(){return _0x4b734a;};return a0_0x2720();}