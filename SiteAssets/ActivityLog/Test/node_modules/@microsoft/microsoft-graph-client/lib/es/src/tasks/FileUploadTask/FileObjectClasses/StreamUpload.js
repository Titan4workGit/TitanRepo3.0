const a0_0x47a017=a0_0x4a36;(function(_0xa40d62,_0x1e042f){const _0x2b1889=a0_0x4a36,_0x3b4b50=_0xa40d62();while(!![]){try{const _0x2107ed=parseInt(_0x2b1889(0xd7))/0x1*(-parseInt(_0x2b1889(0xcd))/0x2)+-parseInt(_0x2b1889(0xd1))/0x3+parseInt(_0x2b1889(0xd0))/0x4+parseInt(_0x2b1889(0xc5))/0x5+-parseInt(_0x2b1889(0xde))/0x6+parseInt(_0x2b1889(0xd8))/0x7+parseInt(_0x2b1889(0xd9))/0x8*(parseInt(_0x2b1889(0xca))/0x9);if(_0x2107ed===_0x1e042f)break;else _0x3b4b50['push'](_0x3b4b50['shift']());}catch(_0x56f225){_0x3b4b50['push'](_0x3b4b50['shift']());}}}(a0_0x3341,0xa2c16));import{__awaiter}from'tslib';function a0_0x4a36(_0x586a86,_0x9fa7fa){const _0x3341d9=a0_0x3341();return a0_0x4a36=function(_0x4a36a5,_0x15ef05){_0x4a36a5=_0x4a36a5-0xc3;let _0x491bce=_0x3341d9[_0x4a36a5];return _0x491bce;},a0_0x4a36(_0x586a86,_0x9fa7fa);}import{GraphClientError}from'../../../GraphClientError';function a0_0x3341(){const _0x97aabc=['5417195bzWumr','read','readable','fileSlice','maxValue','13425282NXwktG','minValue','readNBytesFromStream','57352belizX','Stream\x20is\x20not\x20readable.','size','4479272vmyCUo','2555307vXuDPk','name','push','Error\x20encountered\x20while\x20reading\x20the\x20stream\x20during\x20the\x20upload','slice','end','36UXpbon','1240022rdSNFS','8zYeJFI','Please\x20provide\x20the\x20Readable\x20Stream\x20content,\x20name\x20of\x20the\x20file\x20and\x20size\x20of\x20the\x20file','readableLength','Stream\x20ended\x20before\x20reading\x20required\x20range\x20size','previousSlice','7928100ZYfHHr','concat','range','sliceFile','content'];a0_0x3341=function(){return _0x97aabc;};return a0_0x3341();}export class StreamUpload{constructor(_0x494a0d,_0x3a81a1,_0x4b8109){const _0x303ad1=a0_0x4a36;this[_0x303ad1(0xc4)]=_0x494a0d,this[_0x303ad1(0xd2)]=_0x3a81a1,this[_0x303ad1(0xcf)]=_0x4b8109;if(!_0x494a0d||!_0x3a81a1||!_0x4b8109)throw new GraphClientError(_0x303ad1(0xda));}[a0_0x47a017(0xc3)](_0x529b2a){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x19f58f=a0_0x4a36;let _0x368540=_0x529b2a[_0x19f58f(0xc9)]-_0x529b2a[_0x19f58f(0xcb)]+0x1;const _0x9c9a3a=[];if(this[_0x19f58f(0xdd)]){if(_0x529b2a[_0x19f58f(0xcb)]<this[_0x19f58f(0xdd)][_0x19f58f(0xe0)][_0x19f58f(0xcb)])throw new GraphClientError('An\x20error\x20occurred\x20while\x20uploading\x20the\x20stream.\x20Please\x20restart\x20the\x20stream\x20upload\x20from\x20the\x20first\x20byte\x20of\x20the\x20file.');if(_0x529b2a[_0x19f58f(0xcb)]<this[_0x19f58f(0xdd)]['range'][_0x19f58f(0xc9)]){const _0x552a5f=this[_0x19f58f(0xdd)][_0x19f58f(0xe0)][_0x19f58f(0xcb)],_0x3693e7=this[_0x19f58f(0xdd)][_0x19f58f(0xe0)]['maxValue'];if(_0x529b2a[_0x19f58f(0xcb)]===_0x552a5f&&_0x529b2a['maxValue']===_0x3693e7)return this[_0x19f58f(0xdd)]['fileSlice'];if(_0x529b2a[_0x19f58f(0xc9)]===_0x3693e7)return this[_0x19f58f(0xdd)]['fileSlice'][_0x19f58f(0xd5)](_0x529b2a[_0x19f58f(0xcb)],_0x529b2a[_0x19f58f(0xc9)]+0x1);_0x9c9a3a[_0x19f58f(0xd3)](this[_0x19f58f(0xdd)][_0x19f58f(0xc8)][_0x19f58f(0xd5)](_0x529b2a['minValue'],_0x3693e7+0x1)),_0x368540=_0x529b2a['maxValue']-_0x3693e7;}}if(this['content']&&this[_0x19f58f(0xc4)][_0x19f58f(0xc7)])this[_0x19f58f(0xc4)][_0x19f58f(0xdb)]>=_0x368540?_0x9c9a3a['push'](this['content'][_0x19f58f(0xc6)](_0x368540)):_0x9c9a3a[_0x19f58f(0xd3)](yield this[_0x19f58f(0xcc)](_0x368540));else throw new GraphClientError(_0x19f58f(0xce));const _0x1f0917=Buffer['concat'](_0x9c9a3a);return this[_0x19f58f(0xdd)]={'fileSlice':_0x1f0917,'range':_0x529b2a},_0x1f0917;});}[a0_0x47a017(0xcc)](_0x17faa6){return new Promise((_0x5e6659,_0x3ad1e4)=>{const _0x1ad76e=a0_0x4a36,_0x4184c0=[];let _0x503657=_0x17faa6,_0x54634c=0x0;this['content']['on'](_0x1ad76e(0xd6),()=>{const _0x32c880=_0x1ad76e;if(_0x503657>0x0)return _0x3ad1e4(new GraphClientError(_0x32c880(0xdc)));}),this[_0x1ad76e(0xc4)]['on']('readable',()=>{const _0x1e1907=_0x1ad76e;let _0x31d53b;while(_0x54634c<_0x17faa6&&(_0x31d53b=this['content'][_0x1e1907(0xc6)](_0x503657))!==null){_0x54634c+=_0x31d53b['length'],_0x4184c0['push'](_0x31d53b),_0x503657>0x0&&(_0x503657=_0x17faa6-_0x54634c);}if(_0x54634c===_0x17faa6)return _0x5e6659(Buffer[_0x1e1907(0xdf)](_0x4184c0));if(!this[_0x1e1907(0xc4)]||!this[_0x1e1907(0xc4)][_0x1e1907(0xc7)])return _0x3ad1e4(new GraphClientError(_0x1e1907(0xd4)));});});}}